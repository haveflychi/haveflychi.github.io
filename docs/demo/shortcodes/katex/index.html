<!DOCTYPE html>





    
        
    

    
        
    

    

    

<html lang="zh-CN"><head>
    <meta charset="utf-8" />
    <title>KaTex | Maxbit Docs</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="A Shortcode to render KaTex syntax in your Lotus Docs site">
    <meta name="keywords" content="Documentation, Hugo, Hugo Theme, Bootstrap" />
    <meta name="author" content="Colin Wilson - Lotus Labs" />
    <meta name="email" content="support@aigis.uk" />
    <meta name="website" content="https://lotusdocs.dev" />
    <meta name="Version" content="v0.1.0" />
    
    <link rel="icon" href="/favicon.ico" sizes="any">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" crossorigin="use-credentials" href="/site.webmanifest">
<meta property="og:title" content="KaTex" />
<meta property="og:description" content="A Shortcode to render KaTex syntax in your Lotus Docs site" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/docs/demo/shortcodes/katex/" /><meta property="og:image" content="/opengraph/card-base-2_hu06b1a92291a380a0d2e0ec03dab66b2f_17642_filter_5018490821455736659.png"/><meta property="article:section" content="docs" />
<meta property="article:published_time" content="2023-08-27T04:13:11+01:00" />
<meta property="article:modified_time" content="2024-07-26T13:46:10+08:00" /><meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="/opengraph/card-base-2_hu06b1a92291a380a0d2e0ec03dab66b2f_17642_filter_5018490821455736659.png"/>
<meta name="twitter:title" content="KaTex"/>
<meta name="twitter:description" content="A Shortcode to render KaTex syntax in your Lotus Docs site"/>

    
    <script>(()=>{var t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,e=localStorage.getItem("theme");t&&e===null&&(localStorage.setItem("theme","dark"),document.documentElement.setAttribute("data-dark-mode","")),t&&e==="dark"&&document.documentElement.setAttribute("data-dark-mode",""),e==="dark"&&document.documentElement.setAttribute("data-dark-mode","")})()</script>
    
    
            
                
                <script type="text/javascript" src="/docs/js/flexsearch.bundle.min.249548594cb6843f3060a3cdd3043799676c59ce8db83358a3fc2e4d20598d05dfa6ce4994805d2835cb33b54dc9b9e7.js" integrity="sha384-JJVIWUy2hD8wYKPN0wQ3mWdsWc6NuDNYo/wuTSBZjQXfps5JlIBdKDXLM7VNybnn" crossorigin="anonymous"></script>
                
        
    
    
    
    
        
        
        
        
    
        
        
        
        
    
    
    <link rel="preconnect" href="https://fonts.gstatic.com/" />
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin />
    <link href="https://fonts.googleapis.com/css?family=Inter:300,400,600,700|Fira+Code:500,700&display=block" rel="stylesheet">

    <link rel="stylesheet" href="/docs/scss/style.min.c192029c65686157242dc1ec592017ac3aee67550ca58756b09fc7d0ead882b74a61f12253e9114c8aed414ccfcbf673.css" integrity="sha384-wZICnGVoYVckLcHsWSAXrDruZ1UMpYdWsJ/H0OrYgrdKYfEiU&#43;kRTIrtQUzPy/Zz"crossorigin="anonymous">
    <link rel="stylesheet" href="/docs/scss/katex.min.8d55e5153865e6cbdd63203b1168f5a06c9e69e03d8c3aa45aa84a3c1809fc595ec0c4e233ee383a3d110eb6ef09baae.css" integrity="sha384-jVXlFThl5svdYyA7EWj1oGyeaeA9jDqkWqhKPBgJ/FlewMTiM&#43;44Oj0RDrbvCbqu"crossorigin="anonymous">
    
    
        
        <script src="/docs/js/katex.min.177db1b90e70dff12128b21e6b17231f4e4361d0900ef77892e662fe2ec4f73c7131eb405c523bacc7da00af3f7f8244.js" integrity="sha384-F32xuQ5w3/EhKLIeaxcjH05DYdCQDvd4kuZi/i7E9zxxMetAXFI7rMfaAK8/f4JE"defer></script>
    <script src="/docs/js/auto-render.min.37bbffecf63ad080846fcb85afc455064d24048a73a0b9475c9ccf86b0ba4f8dcb0aa2047db27ac1bf94af5c6cc4b2e3.js" integrity="sha384-N7v/7PY60ICEb8uFr8RVBk0kBIpzoLlHXJzPhrC6T43LCqIEfbJ6wb&#43;Ur1xsxLLj"defer></script>
    
    <script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement(document.getElementById("content"), {
          
          
          delimiters: [
              {left: '$$', right: '$$', display: true},
              {left: '$', right: '$', display: false},
              {left: '\\(', right: '\\)', display: false},
              {left: '\\[', right: '\\]', display: true}
          ],
          
          throwOnError : false
        });
    });
</script>
    
    </head><body>
        <div class="content">
            <div class="page-wrapper toggled">
<nav id="sidebar" class="sidebar-wrapper">
    <div class="sidebar-brand">
        <a href='/' aria-label="HomePage" alt="HomePage">
            
                <?xml version="1.0" encoding="UTF-8"?><svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 250 250"><path d="m143,39.5c-18,0-18,18-18,18,0,0,0-18-18-18H22c-2.76,0-5,2.24-5,5v143c0,2.76,2.24,5,5,5h76c7.2,0,8.64,11.52,8.93,16.13.07,1.05.95,1.87,2,1.87h32.14c1.06,0,1.94-.82,2-1.87.29-4.61,1.73-16.13,8.93-16.13h76c2.76,0,5-2.24,5-5V44.5c0-2.76-2.24-5-5-5h-85Zm63,123.5c0,1.38-1.12,2.5-2.5,2.5h-60.5c-18,0-18,18-18,18,0,0,0-18-18-18h-60.5c-1.38,0-2.5-1.12-2.5-2.5v-94c0-1.38,1.12-2.5,2.5-2.5h51.5c7.2,0,8.64,11.52,8.93,16.13.07,1.05.95,1.87,2,1.87h32.14c1.06,0,1.94-.82,2-1.87.29-4.61,1.73-16.13,8.93-16.13h51.5c1.38,0,2.5,1.12,2.5,2.5v94Z" style="fill:#06f;"/></svg>
            
        </a>
    </div>
    <div class="sidebar-content" style="height: calc(100% - 131px);">
        <ul class="sidebar-menu">
            
                
                
                    
                    
                        <li class="sidebar-dropdown  ">
                            <button class="btn">
                                <i class="material-icons me-2">Code</i>
                                DEV
                            </button>
                            <div class="sidebar-submenu ">
                                <ul>
                                    
                                        
                                        
                                            <li class="sidebar-dropdown nested  ">
                                                <button class="btn">
                                                    
                                                    Golang
                                                </button>
                                                <div class="sidebar-submenu ">
                                                    <ul>
                                                        
                                                            
                                                            
                                                                <li class="sidebar-dropdown nested  ">
                                                                    <button class="btn">
                                                                        
                                                                        Fyne
                                                                    </button>
                                                                    <div class="sidebar-submenu ">
                                                                        <ul>
                                                                            
                                                                                
                                                                                
                                                                                    <li class=" "><a class="sidebar-nested-link" href="/docs/dev/golang/fyne/1.%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E5%AD%A6%E4%B9%A0fyne/">1.为什么要学习Fyne？</a></li>
                                                                                
                                                                            
                                                                                
                                                                                
                                                                                    <li class=" "><a class="sidebar-nested-link" href="/docs/dev/golang/fyne/2.%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%B0%8F%E9%A1%B9%E7%9B%AE/">2.第一个小项目</a></li>
                                                                                
                                                                            
                                                                                
                                                                                
                                                                                    <li class=" "><a class="sidebar-nested-link" href="/docs/dev/golang/fyne/3.%E5%A4%84%E7%90%86%E5%A4%9A%E7%AA%97%E5%8F%A3/">3.处理多窗口问题</a></li>
                                                                                
                                                                            
                                                                                
                                                                                
                                                                                    <li class=" "><a class="sidebar-nested-link" href="/docs/dev/golang/fyne/4.go%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80%E5%BF%AB%E9%80%9F%E9%80%9A%E5%85%B3/">4.Go基础速通</a></li>
                                                                                
                                                                            
                                                                                
                                                                                
                                                                                    <li class=" "><a class="sidebar-nested-link" href="/docs/dev/golang/fyne/5.%E6%9B%B4%E5%A4%8D%E6%9D%82%E7%9A%84%E9%A1%B9%E7%9B%AE/">5.更复杂的项目</a></li>
                                                                                
                                                                            
                                                                                
                                                                                
                                                                                    <li class="sidebar-dropdown nested  ">
                                                                                        <button class="btn">
                                                                                            
                                                                                            项目案例
                                                                                        </button>
                                                                                        <div class="sidebar-submenu ">
                                                                                            <ul>
                                                                                                
                                                                                                    
                                                                                                    <li class=" "><a class="sidebar-nested-link" href="/docs/dev/golang/fyne/project/1.markdown%E7%BC%96%E8%BE%91%E5%99%A8/">Fyne-Markdown编辑器</a></li>
                                                                                                
                                                                                                    
                                                                                                    <li class=" "><a class="sidebar-nested-link" href="/docs/dev/golang/fyne/project/2.%E8%B6%A3%E5%91%B3%E6%95%B4%E6%B4%BB%E9%A1%B9%E7%9B%AE/">Fyne-趣味整活项目</a></li>
                                                                                                
                                                                                            </ul>
                                                                                        </div>
                                                                                    </li>
                                                                                
                                                                            
                                                                        </ul>
                                                                    </div>
                                                                </li>
                                                            
                                                        
                                                    </ul>
                                                </div>
                                            </li>
                                        
                                    
                                </ul>
                            </div>
                        </li>
                    
                
                    
                    
                        <li class="sidebar-dropdown  ">
                            <button class="btn">
                                <i class="material-icons me-2">cloud_done</i>
                                OPS
                            </button>
                            <div class="sidebar-submenu ">
                                <ul>
                                    
                                        
                                        
                                            <li class=" "><a class="sidebar-nested-link" href="/docs/ops/1.nginx%E9%85%8D%E7%BD%AE%E5%B0%8F%E5%85%A8/">1.Nginx配置小全</a></li>
                                        
                                    
                                </ul>
                            </div>
                        </li>
                    
                
                    
                    
                        <li class="sidebar-dropdown  ">
                            <button class="btn">
                                <i class="material-icons me-2">database</i>
                                DBA
                            </button>
                            <div class="sidebar-submenu ">
                                <ul>
                                    
                                        
                                        
                                            <li class=" "><a class="sidebar-nested-link" href="/docs/dba/dome/">第一篇WIKI</a></li>
                                        
                                    
                                </ul>
                            </div>
                        </li>
                    
                
                    
                    
                        <li class="sidebar-dropdown  current active">
                            <button class="btn">
                                <i class="material-icons me-2">edit</i>
                                DEMO
                            </button>
                            <div class="sidebar-submenu d-block">
                                <ul>
                                    
                                        
                                        
                                            <li class="sidebar-dropdown nested  ">
                                                <button class="btn">
                                                    
                                                    Features
                                                </button>
                                                <div class="sidebar-submenu ">
                                                    <ul>
                                                        
                                                            
                                                            
                                                                <li class=" "><a class="sidebar-nested-link" href="/docs/demo/features/syntax-highlighting/">Syntax Highlighting</a></li>
                                                            
                                                        
                                                            
                                                            
                                                                <li class=" "><a class="sidebar-nested-link" href="/docs/demo/features/katex/">KaTex</a></li>
                                                            
                                                        
                                                            
                                                            
                                                                <li class=" "><a class="sidebar-nested-link" href="/docs/demo/features/mermaid/">Mermaid</a></li>
                                                            
                                                        
                                                    </ul>
                                                </div>
                                            </li>
                                        
                                    
                                        
                                        
                                            <li class="sidebar-dropdown nested  current active">
                                                <button class="btn">
                                                    
                                                    Shortcodes
                                                </button>
                                                <div class="sidebar-submenu d-block">
                                                    <ul>
                                                        
                                                            
                                                            
                                                                <li class=" "><a class="sidebar-nested-link" href="/docs/demo/shortcodes/alerts/">Alerts</a></li>
                                                            
                                                        
                                                            
                                                            
                                                                <li class=" "><a class="sidebar-nested-link" href="/docs/demo/shortcodes/tables/">Tables</a></li>
                                                            
                                                        
                                                            
                                                            
                                                                <li class=" "><a class="sidebar-nested-link" href="/docs/demo/shortcodes/tabs/">Tabs</a></li>
                                                            
                                                        
                                                            
                                                            
                                                                <li class=" "><a class="sidebar-nested-link" href="/docs/demo/shortcodes/prism/">Prism</a></li>
                                                            
                                                        
                                                            
                                                            
                                                                <li class=" "><a class="sidebar-nested-link" href="/docs/demo/shortcodes/markdownify/">Markdownify</a></li>
                                                            
                                                        
                                                            
                                                            
                                                                <li class="current "><a class="sidebar-nested-link" href="/docs/demo/shortcodes/katex/">KaTex</a></li>
                                                            
                                                        
                                                    </ul>
                                                </div>
                                            </li>
                                        
                                    
                                </ul>
                            </div>
                        </li>
                    
                
            
        </ul>
        
    </div>
    
        <ul class="sidebar-footer list-unstyled mb-0">
            
        </ul>
    
</nav>

                    <main class="page-content bg-transparent">
                        
<div id="top-header" class="top-header d-print-none">
    <div class="header-bar d-flex justify-content-between">
        <div class="d-flex align-items-center">
            <a href='/' class="logo-icon me-3" aria-label="HomePage" alt="HomePage">
                <div class="small">
                    
                            <?xml version="1.0" encoding="UTF-8"?><svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 250 250"><path d="m143,39.5c-18,0-18,18-18,18,0,0,0-18-18-18H22c-2.76,0-5,2.24-5,5v143c0,2.76,2.24,5,5,5h76c7.2,0,8.64,11.52,8.93,16.13.07,1.05.95,1.87,2,1.87h32.14c1.06,0,1.94-.82,2-1.87.29-4.61,1.73-16.13,8.93-16.13h76c2.76,0,5-2.24,5-5V44.5c0-2.76-2.24-5-5-5h-85Zm63,123.5c0,1.38-1.12,2.5-2.5,2.5h-60.5c-18,0-18,18-18,18,0,0,0-18-18-18h-60.5c-1.38,0-2.5-1.12-2.5-2.5v-94c0-1.38,1.12-2.5,2.5-2.5h51.5c7.2,0,8.64,11.52,8.93,16.13.07,1.05.95,1.87,2,1.87h32.14c1.06,0,1.94-.82,2-1.87.29-4.61,1.73-16.13,8.93-16.13h51.5c1.38,0,2.5,1.12,2.5,2.5v94Z" style="fill:#06f;"/></svg>
                    
                </div>
                <div class="big">
                    
                            <?xml version="1.0" encoding="UTF-8"?><svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 250 250"><path d="m143,39.5c-18,0-18,18-18,18,0,0,0-18-18-18H22c-2.76,0-5,2.24-5,5v143c0,2.76,2.24,5,5,5h76c7.2,0,8.64,11.52,8.93,16.13.07,1.05.95,1.87,2,1.87h32.14c1.06,0,1.94-.82,2-1.87.29-4.61,1.73-16.13,8.93-16.13h76c2.76,0,5-2.24,5-5V44.5c0-2.76-2.24-5-5-5h-85Zm63,123.5c0,1.38-1.12,2.5-2.5,2.5h-60.5c-18,0-18,18-18,18,0,0,0-18-18-18h-60.5c-1.38,0-2.5-1.12-2.5-2.5v-94c0-1.38,1.12-2.5,2.5-2.5h51.5c7.2,0,8.64,11.52,8.93,16.13.07,1.05.95,1.87,2,1.87h32.14c1.06,0,1.94-.82,2-1.87.29-4.61,1.73-16.13,8.93-16.13h51.5c1.38,0,2.5,1.12,2.5,2.5v94Z" style="fill:#06f;"/></svg>
                    
                </div>
            </a>
            <button id="close-sidebar" class="btn btn-icon btn-soft">
                <span class="material-icons size-20 menu-icon align-middle">menu</span>
            </button>
            
            
                    
                    <button id="flexsearch-button" class="ms-3 btn btn-soft" data-bs-toggle="collapse" data-bs-target="#FlexSearchCollapse" aria-expanded="false" aria-controls="FlexSearchCollapse">
                        <span class="material-icons size-20 menu-icon align-middle">search</span>
                        <span class="flexsearch-button-placeholder ms-1 me-2 d-none d-sm-block">Search</span>
                        <div class="d-none d-sm-block">
                            <span class="flexsearch-button-keys">
                                <kbd class="flexsearch-button-cmd-key">
                                    <svg width="44" height="15"><path d="M2.118,11.5A1.519,1.519,0,0,1,1,11.042,1.583,1.583,0,0,1,1,8.815a1.519,1.519,0,0,1,1.113-.458h.715V6.643H2.118A1.519,1.519,0,0,1,1,6.185,1.519,1.519,0,0,1,.547,5.071,1.519,1.519,0,0,1,1,3.958,1.519,1.519,0,0,1,2.118,3.5a1.519,1.519,0,0,1,1.114.458A1.519,1.519,0,0,1,3.69,5.071v.715H5.4V5.071A1.564,1.564,0,0,1,6.976,3.5,1.564,1.564,0,0,1,8.547,5.071,1.564,1.564,0,0,1,6.976,6.643H6.261V8.357h.715a1.575,1.575,0,0,1,1.113,2.685,1.583,1.583,0,0,1-2.227,0A1.519,1.519,0,0,1,5.4,9.929V9.214H3.69v.715a1.519,1.519,0,0,1-.458,1.113A1.519,1.519,0,0,1,2.118,11.5Zm0-.857a.714.714,0,0,0,.715-.714V9.214H2.118a.715.715,0,1,0,0,1.429Zm4.858,0a.715.715,0,1,0,0-1.429H6.261v.715a.714.714,0,0,0,.715.714ZM3.69,8.357H5.4V6.643H3.69ZM2.118,5.786h.715V5.071a.714.714,0,0,0-.715-.714.715.715,0,0,0-.5,1.22A.686.686,0,0,0,2.118,5.786Zm4.143,0h.715a.715.715,0,0,0,.5-1.22.715.715,0,0,0-1.22.5Z" fill="currentColor"></path><path d="M12.4,11.475H11.344l3.879-7.95h1.056Z" fill="currentColor"></path><path d="M25.073,5.384l-.864.576a2.121,2.121,0,0,0-1.786-.923,2.207,2.207,0,0,0-2.266,2.326,2.206,2.206,0,0,0,2.266,2.325,2.1,2.1,0,0,0,1.782-.918l.84.617a3.108,3.108,0,0,1-2.622,1.293,3.217,3.217,0,0,1-3.349-3.317,3.217,3.217,0,0,1,3.349-3.317A3.046,3.046,0,0,1,25.073,5.384Z" fill="currentColor"></path><path d="M30.993,5.142h-2.07v5.419H27.891V5.142h-2.07V4.164h5.172Z" fill="currentColor"></path><path d="M34.67,4.164c1.471,0,2.266.658,2.266,1.851,0,1.087-.832,1.809-2.134,1.855l2.107,2.691h-1.28L33.591,7.87H33.07v2.691H32.038v-6.4Zm-1.6.969v1.8h1.572c.832,0,1.22-.3,1.22-.918s-.411-.882-1.22-.882Z" fill="currentColor"></path><path d="M42.883,10.561H38.31v-6.4h1.033V9.583h3.54Z" fill="currentColor"></path></svg>
                                </kbd>
                                <kbd class="flexsearch-button-key">
                                    <svg width="15" height="15"><path d="M5.926,12.279H4.41L9.073,2.721H10.59Z" fill="currentColor"/></svg>
                                </kbd>
                            </span>
                        </div>
                    </button>
                
            </div>

        <div class="d-flex align-items-center">
            <ul class="list-unstyled mb-0">
                
                
                    
                    <li class="list-inline-item mb-0">
                        <a href=" https://github.com/bingdang " alt="github" rel="noopener noreferrer" target="_blank">
                            <div class="btn btn-icon btn-default border-0">
                                
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>GitHub</title><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg>
                                
                            </div>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item mb-0">
                        <a href=" https://twitter.com/# " alt="twitter" rel="noopener noreferrer" target="_blank">
                            <div class="btn btn-icon btn-default border-0">
                                
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><title>Twitter / X</title><path d="M.088.768l9.266,12.39L.029,23.231h2.1l8.163-8.819,6.6,8.819h7.142L14.242,10.145,22.921.768h-2.1L13.3,8.891,7.229.768ZM3.174,2.314H6.455L20.942,21.685h-3.28Z" fill="currentColor"/></svg>
                                
                            </div>
                        </a>
                    </li>
                    
                
            </ul>
            <button id="mode" class="btn btn-icon btn-default ms-2" type="button" aria-label="Toggle user interface mode">
                <span class="toggle-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" height="30" width="30" viewBox="0 0 48 48" fill="currentColor">
                        <title>Enable dark mode</title>
                        <path d="M24 42q-7.5 0-12.75-5.25T6 24q0-7.5 5.25-12.75T24 6q.4 0 .85.025.45.025 1.15.075-1.8 1.6-2.8 3.95-1 2.35-1 4.95 0 4.5 3.15 7.65Q28.5 25.8 33 25.8q2.6 0 4.95-.925T41.9 22.3q.05.6.075.975Q42 23.65 42 24q0 7.5-5.25 12.75T24 42Zm0-3q5.45 0 9.5-3.375t5.05-7.925q-1.25.55-2.675.825Q34.45 28.8 33 28.8q-5.75 0-9.775-4.025T19.2 15q0-1.2.25-2.575.25-1.375.9-3.125-4.9 1.35-8.125 5.475Q9 18.9 9 24q0 6.25 4.375 10.625T24 39Zm-.2-14.85Z"/>
                    </svg>
                </span>
                <span class="toggle-light">
                    <svg xmlns="http://www.w3.org/2000/svg" height="30" width="30" viewBox="0 0 48 48" fill="currentColor">
                        <title>Enable light mode</title>
                        <path d="M24 31q2.9 0 4.95-2.05Q31 26.9 31 24q0-2.9-2.05-4.95Q26.9 17 24 17q-2.9 0-4.95 2.05Q17 21.1 17 24q0 2.9 2.05 4.95Q21.1 31 24 31Zm0 3q-4.15 0-7.075-2.925T14 24q0-4.15 2.925-7.075T24 14q4.15 0 7.075 2.925T34 24q0 4.15-2.925 7.075T24 34ZM3.5 25.5q-.65 0-1.075-.425Q2 24.65 2 24q0-.65.425-1.075Q2.85 22.5 3.5 22.5h5q.65 0 1.075.425Q10 23.35 10 24q0 .65-.425 1.075-.425.425-1.075.425Zm36 0q-.65 0-1.075-.425Q38 24.65 38 24q0-.65.425-1.075.425-.425 1.075-.425h5q.65 0 1.075.425Q46 23.35 46 24q0 .65-.425 1.075-.425.425-1.075.425ZM24 10q-.65 0-1.075-.425Q22.5 9.15 22.5 8.5v-5q0-.65.425-1.075Q23.35 2 24 2q.65 0 1.075.425.425.425.425 1.075v5q0 .65-.425 1.075Q24.65 10 24 10Zm0 36q-.65 0-1.075-.425-.425-.425-.425-1.075v-5q0-.65.425-1.075Q23.35 38 24 38q.65 0 1.075.425.425.425.425 1.075v5q0 .65-.425 1.075Q24.65 46 24 46ZM12 14.1l-2.85-2.8q-.45-.45-.425-1.075.025-.625.425-1.075.45-.45 1.075-.45t1.075.45L14.1 12q.4.45.4 1.05 0 .6-.4 1-.4.45-1.025.45-.625 0-1.075-.4Zm24.7 24.75L33.9 36q-.4-.45-.4-1.075t.45-1.025q.4-.45 1-.45t1.05.45l2.85 2.8q.45.45.425 1.075-.025.625-.425 1.075-.45.45-1.075.45t-1.075-.45ZM33.9 14.1q-.45-.45-.45-1.05 0-.6.45-1.05l2.8-2.85q.45-.45 1.075-.425.625.025 1.075.425.45.45.45 1.075t-.45 1.075L36 14.1q-.4.4-1.025.4-.625 0-1.075-.4ZM9.15 38.85q-.45-.45-.45-1.075t.45-1.075L12 33.9q.45-.45 1.05-.45.6 0 1.05.45.45.45.45 1.05 0 .6-.45 1.05l-2.8 2.85q-.45.45-1.075.425-.625-.025-1.075-.425ZM24 24Z"/>
                    </svg>
                </span>
            </button>
            
        </div>
    </div>
    
    
            <div class="collapse" id="FlexSearchCollapse">
                <div class="flexsearch-container">
                    <div class="flexsearch-keymap">
                        <li>
                            <kbd class="flexsearch-button-cmd-key"><svg width="15" height="15" aria-label="Arrow down" role="img"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M7.5 3.5v8M10.5 8.5l-3 3-3-3"></path></g></svg></kbd>
                            <kbd class="flexsearch-button-cmd-key"><svg width="15" height="15" aria-label="Arrow up" role="img"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M7.5 11.5v-8M10.5 6.5l-3-3-3 3"></path></g></svg></kbd>
                            <span class="flexsearch-key-label">to navigate</span>
                        </li>
                        <li>
                            <kbd class="flexsearch-button-cmd-key"><svg width="15" height="15" aria-label="Enter key" role="img"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M12 3.53088v3c0 1-1 2-2 2H4M7 11.53088l-3-3 3-3"></path></g></svg></kbd>
                            <span class="flexsearch-key-label">to select</span>
                        </li>
                        <li>
                            <kbd class="flexsearch-button-cmd-key"><svg width="15" height="15" aria-label="Escape key" role="img"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M13.6167 8.936c-.1065.3583-.6883.962-1.4875.962-.7993 0-1.653-.9165-1.653-2.1258v-.5678c0-1.2548.7896-2.1016 1.653-2.1016.8634 0 1.3601.4778 1.4875 1.0724M9 6c-.1352-.4735-.7506-.9219-1.46-.8972-.7092.0246-1.344.57-1.344 1.2166s.4198.8812 1.3445.9805C8.465 7.3992 8.968 7.9337 9 8.5c.032.5663-.454 1.398-1.4595 1.398C6.6593 9.898 6 9 5.963 8.4851m-1.4748.5368c-.2635.5941-.8099.876-1.5443.876s-1.7073-.6248-1.7073-2.204v-.4603c0-1.0416.721-2.131 1.7073-2.131.9864 0 1.6425 1.031 1.5443 2.2492h-2.956"></path></g></svg></kbd>
                            <span class="flexsearch-key-label">to close</span>
                        </li>
                    </div>
                    <form class="flexsearch position-relative flex-grow-1 ms-2 me-2">
                        <div class="d-flex flex-row">
                            <input id="flexsearch" class="form-control" type="search" placeholder="Search" aria-label="Search" autocomplete="off">
                            <button id="hideFlexsearch" type="button" class="ms-2 btn btn-soft">
                                cancel
                            </button>
                        </div>
                        <div id="suggestions" class="shadow rounded-1 d-none"></div>
                    </form>
                </div>
            </div>
        
    
    
</div>

                            <div class="container-fluid">
                                <div class="layout-spacing">
                                    
                                        <div class="d-md-flex justify-content-between align-items-center"><nav aria-label="breadcrumb" class="d-inline-block pb-2 mt-1 mt-sm-0">
    <ul id="breadcrumbs" class="breadcrumb bg-transparent mb-0" itemscope itemtype="https://schema.org/BreadcrumbList">
        
            
                <li class="breadcrumb-item text-capitalize active" aria-current="page" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
                    <a itemprop="item" href="/docs/">
                        <i class="material-icons size-20 align-text-bottom" itemprop="name">Home</i>
                    </a>
                    <meta itemprop="position" content='1' />
                </li>
            
            
                <li class="breadcrumb-item text-capitalize" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
                    <a itemprop="item" href="/docs/demo/">
                        <span itemprop="name">DEMO</span>
                    </a>
                    <meta itemprop="position" content='2' />
                </li>
            
            
                <li class="breadcrumb-item text-capitalize" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
                    <a itemprop="item" href="/docs/demo/shortcodes/">
                        <span itemprop="name">Shortcodes</span>
                    </a>
                    <meta itemprop="position" content='3' />
                </li>
            
        
            <li class="breadcrumb-item text-capitalize active" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
                <span itemprop="name">KaTex</span>
                <meta itemprop="position" content='4' />
            </li>
        
    </ul>
</nav></div>
                                    
                                    <div class="row flex-xl-nowrap">
                                        
                                        <div class="docs-toc col-xl-3  visually-hidden  d-xl-block"><toc>
    <div class="fw-bold text-uppercase mb-2">On this page</div>
    <nav id="toc"></nav>
    </toc></div>
                                        
                                        
                                        <div class="docs-toc-mobile  visually-hidden  d-print-none d-xl-none">
                                            <button id="toc-dropdown-btn" class="btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" data-bs-offset="0,0" aria-expanded="false">
                                                Table of Contents
                                            </button>
<nav id="toc-mobile"></nav></div>
                                        <div class="docs-content col-12  mt-0">
                                            <div class="mb-0 d-flex">
                                                
                                                <i class="material-icons title-icon me-2">function</i>
                                                
                                                <h1 class="content-title mb-0">
                                                    KaTex
                                                    
                                                </h1>
                                            </div>
                                            
                                                <p class="lead mb-3">A Shortcode to render KaTex syntax in your Lotus Docs site</p>
                                            
                                            <div id="content" class="main-content" data-bs-spy="scroll" data-bs-root-margin="0px 0px -65%" data-bs-target="#toc-mobile">
                                                
    
    <div data-prismjs-copy="" data-prismjs-copy-success="" data-prismjs-copy-error="">
        <p>Lotus Docs has <a data-bs-delay="{&#34;hide&#34;:300,&#34;show&#34;:550}" data-bs-html="true" data-bs-title="<a href='/docs/demo/features/katex/'><p>FEATURES</p><strong>KaTex</strong><br>Fast Tex math rendering for your Lotus Docs site</a>" data-bs-toggle="tooltip" href="/docs/demo/features/katex/">built-in support</a> for <a href="https://katex.org/" rel="external" target="_blank">KaTex<svg width="16" height="16" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z"/></svg></a>. However, there are certain equation syntaxes which do not render well if at all without a lot of character escaping<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup> or alterations. The KaTex shortcode is suited to handle such cases.</p>
<p>For example:</p>



  
  
  

  
  
  
  

  

  <div class="prism-codeblock ">
  <pre id="00cff63" class="language-go ">
  <code>{{&lt; katex &gt;}}
$$
\begin{array} {lcl}
  L(p,w_i) &amp;=&amp; \dfrac{1}{N}\Sigma_{i=1}^N(\underbrace{f_r(x_2
  \rightarrow x_1
  \rightarrow x_0)G(x_1
  \longleftrightarrow x_2)f_r(x_3
  \rightarrow x_2
  \rightarrow x_1)}_{sample\, radiance\, evaluation\, in\, stage2}
  \\\\\\ &amp;=&amp;
  \prod_{i=3}^{k-1}(\underbrace{\dfrac{f_r(x_{i&#43;1}
  \rightarrow x_i
  \rightarrow x_{i-1})G(x_i
  \longleftrightarrow x_{i-1})}{p_a(x_{i-1})}}_{stored\,in\,vertex\, during\,light\, path\, tracing\, in\, stage1})\dfrac{G(x_k
  \longleftrightarrow x_{k-1})L_e(x_k
  \rightarrow x_{k-1})}{p_a(x_{k-1})p_a(x_k)})
\end{array}
$$
{{&lt; /katex &gt;}}</code>
  </pre>
  </div>
<p><strong>renders as</strong>:</p>

  <div class="equation leqno" >$$
\begin{array} {lcl}
  L(p,w_i) &amp;=&amp; \dfrac{1}{N}\Sigma_{i=1}^N(\underbrace{f_r(x_2
  \rightarrow x_1
  \rightarrow x_0)G(x_1
  \longleftrightarrow x_2)f_r(x_3
  \rightarrow x_2
  \rightarrow x_1)}_{sample\, radiance\, evaluation\, in\, stage2}
  \\\\\\ &amp;=&amp;
  \prod_{i=3}^{k-1}(\underbrace{\dfrac{f_r(x_{i&#43;1}
  \rightarrow x_i
  \rightarrow x_{i-1})G(x_i
  \longleftrightarrow x_{i-1})}{p_a(x_{i-1})}}_{stored\,in\,vertex\, during\,light\, path\, tracing\, in\, stage1})\dfrac{G(x_k
  \longleftrightarrow x_{k-1})L_e(x_k
  \rightarrow x_{k-1})}{p_a(x_{k-1})p_a(x_k)})
\end{array}
$$
  </div>
<div class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1">
<p><a href="https://discourse.gohugo.io/t/how-to-render-math-equations-properly-with-katex/40998/4" rel="external" target="_blank">How to render math equations properly with KaTeX<svg width="16" height="16" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z"/></svg></a>&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</div>

    </div>

    





    
    






<div class="gitinfo d-flex flex-wrap justify-content-between align-items-center opacity-85 pt-3">
    
    <div id="last-modified" class="mt-1">
        <p class="mb-0 fw-semibold">Last updated <span
            id="relativetime"
            data-authdate="2024-07-26T13:46:10&#43;0800"
            title="26 Jul 2024, 13:46 &#43;0800">
            26 Jul 2024, 13:46 &#43;0800
        </span>. <span class="material-icons size-20 align-text-bottom opacity-75">history</span>
        </p>
    </div>
    
</div>

    

    
                                            </div>
                                            <div><hr class="doc-hr">
<div id="doc-nav" class="d-print-none">

	<div class="row flex-xl-nowrap ">
	<div class="col-sm-6 pt-2 doc-next">
		<a href="/docs/demo/shortcodes/markdownify/">
			<div class="card h-100 my-1">
				<div class="card-body py-2">
                    <p class="card-title fs-5 fw-semibold lh-base mb-0"><i class="material-icons align-middle">navigate_before</i> Markdownify</p>
					<p class="card-text ms-2">A simple shortcode to render …</p>
					
				</div>
			</div>
		</a>
        </div>
	</div>
</div></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
<footer class="shadow py-3 d-print-none">
    <div class="container-fluid">
        <div class="row align-items-center">
            <div class="col">
                <div class="text-sm-start text-center mx-md-2">
                    <p class="mb-0">
                        
                        © 2024 <a href="https://cakepanit.com"><strong>Maxbit</strong></a>
                    </p>
                </div>
            </div>
        </div>
    </div>
</footer>
</main>
            </div>
        </div>

        
        
        <button onclick="topFunction()" id="back-to-top" aria-label="Back to Top Button" class="back-to-top fs-5"><svg width="24" height="24"><path d="M12,10.224l-6.3,6.3L4.32,15.152,12,7.472l7.68,7.68L18.3,16.528Z" style="fill:#fff"/></svg></button>
        
        

        
        
            <script>(()=>{var e=document.getElementById("mode");e!==null&&(window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{e.matches?(localStorage.setItem("theme","dark"),document.documentElement.setAttribute("data-dark-mode","")):(localStorage.setItem("theme","light"),document.documentElement.removeAttribute("data-dark-mode"))}),e.addEventListener("click",()=>{document.documentElement.toggleAttribute("data-dark-mode"),localStorage.setItem("theme",document.documentElement.hasAttribute("data-dark-mode")?"dark":"light")}),localStorage.getItem("theme")==="dark"?document.documentElement.setAttribute("data-dark-mode",""):document.documentElement.removeAttribute("data-dark-mode"))})()</script>
        




    
        
        
    
    






    

    <script src="/docs/js/bootstrap.eac7ee3f6fa791c684e7a51fc2fd50b6f724271b9e39562e4fe8c3942412df3acbfc4045f043d03399dac70091207507.js" integrity="sha384-6sfuP2&#43;nkcaE56Ufwv1QtvckJxueOVYuT&#43;jDlCQS3zrL/EBF8EPQM5naxwCRIHUH"defer></script>


    <script type="text/javascript" src="/docs/js/bundle.min.962d07c14278e10a9983e440d02fc89e2053bcefbbc05a8393b31a2d4f17d3d2eef1e89945a77f2110542c802862d8d5.js" integrity="sha384-li0HwUJ44QqZg&#43;RA0C/IniBTvO&#43;7wFqDk7MaLU8X09Lu8eiZRad/IRBULIAoYtjV" crossorigin="anonymous" defer></script>
        

        
        <script type="module">
    var suggestions = document.getElementById('suggestions');
    var search = document.getElementById('flexsearch');

    const flexsearchContainer = document.getElementById('FlexSearchCollapse');

    const hideFlexsearchBtn = document.getElementById('hideFlexsearch');

    const configObject = { toggle: false }
    const flexsearchContainerCollapse = new Collapse(flexsearchContainer, configObject) 

    if (search !== null) {
        document.addEventListener('keydown', inputFocus);
        flexsearchContainer.addEventListener('shown.bs.collapse', function () {
            search.focus();
        });
        
        var topHeader = document.getElementById("top-header");
        document.addEventListener('click', function(elem) {
            if (!flexsearchContainer.contains(elem.target) && !topHeader.contains(elem.target))
                flexsearchContainerCollapse.hide();
        });
    }

    hideFlexsearchBtn.addEventListener('click', () =>{
        flexsearchContainerCollapse.hide()
    })

    function inputFocus(e) {
        if (e.ctrlKey && e.key === '/') {
            e.preventDefault();
            flexsearchContainerCollapse.toggle();
        }
        if (e.key === 'Escape' ) {
            search.blur();
            
            flexsearchContainerCollapse.hide();
        }
    };

    document.addEventListener('click', function(event) {

    var isClickInsideElement = suggestions.contains(event.target);

    if (!isClickInsideElement) {
        suggestions.classList.add('d-none');
    }

    });

    


    document.addEventListener('keydown',suggestionFocus);

    function suggestionFocus(e) {
    const suggestionsHidden = suggestions.classList.contains('d-none');
    if (suggestionsHidden) return;

    const focusableSuggestions= [...suggestions.querySelectorAll('a')];
    if (focusableSuggestions.length === 0) return;

    const index = focusableSuggestions.indexOf(document.activeElement);

    if (e.key === "ArrowUp") {
        e.preventDefault();
        const nextIndex = index > 0 ? index - 1 : 0;
        focusableSuggestions[nextIndex].focus();
    }
    else if (e.key === "ArrowDown") {
        e.preventDefault();
        const nextIndex= index + 1 < focusableSuggestions.length ? index + 1 : index;
        focusableSuggestions[nextIndex].focus();
    }

    }

    


    (function(){

    var index = new FlexSearch.Document({
        
        tokenize: "forward",
        minlength:  0 ,
        cache:  100 ,
        optimize:  true ,
        document: {
        id: 'id',
        store: [
            "href", "title", "description"
        ],
        index: ["title", "description", "content"]
        }
    });


    


    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    


    

    

    index.add(
            {
                id:  0 ,
                href: "\/docs\/dev\/",
                title: "DEV",
                description: "",
                content: ""
            }
        );
    index.add(
            {
                id:  1 ,
                href: "\/docs\/ops\/",
                title: "OPS",
                description: "",
                content: ""
            }
        );
    index.add(
            {
                id:  2 ,
                href: "\/docs\/dba\/",
                title: "DBA",
                description: "",
                content: ""
            }
        );
    index.add(
            {
                id:  3 ,
                href: "\/docs\/dba\/dome\/",
                title: "第一篇WIKI",
                description: "A quickstart guide to creating new content in Lotus Docs",
                content: "Create New Content linkNavigate to the root of your Hugo project and use the hugo new command to create a file in the content/docs directory:\nhugo new docs/examplepage.md "
            }
        );
    index.add(
            {
                id:  4 ,
                href: "\/docs\/demo\/",
                title: "DEMO",
                description: "模版",
                content: ""
            }
        );
    index.add(
            {
                id:  5 ,
                href: "\/docs\/dev\/golang\/",
                title: "Golang",
                description: "Go语言相关文档",
                content: ""
            }
        );
    index.add(
            {
                id:  6 ,
                href: "\/docs\/dev\/golang\/fyne\/",
                title: "Fyne",
                description: "用Golang-Fyne开发GUI程序",
                content: ""
            }
        );
    index.add(
            {
                id:  7 ,
                href: "\/docs\/dev\/golang\/fyne\/1.%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E5%AD%A6%E4%B9%A0fyne\/",
                title: "1.为什么要学习Fyne？",
                description: "Fyne 是一个纯Golang 的跨平台GUI 库..",
                content: "GUI Application 的定义 linkGUI(Graphical User Interface/图形用户界面)程序是指使用图形界面与用户进行交互的软件应用程序。图形界面通常包括窗口、图标、按钮、文本框、菜单等可视化元素, 使用户可以通过直观的操作(如点击、拖动, 输入内容)与程序进行交互, 而不需要通过如命令行进行操作。\n例子: 好比 VS Code 就是。\n使用 Fyne 开发 GUI(图形用户界面)程序有许多优势, 我们简单地和 Electron 比较一下。\n1. 轻量 link Fyne：Fyne 是一个轻量级的 GUI 框架, 应用程序的体积相对较小, 占用的系统资源也较少。 Electron：Electron 打包了整个 Chromium 和 Node.js, 导致应用程序的体积较大, 并且在运行时占用不少内存。 2. 性能 link Fyne：Fyne 应用是用 Go 语言编写的, Go 语言本身以其高效和快速的性能而闻名。Fyne 应用在启动和运行时的性能通常优于 Electron 应用。 Electron：由于 Electron 依赖于 Chromium 和 Node.js, 其性能受限于这些底层技术的性能。Electron 应用启动较慢, 运行时占用较多的内存和 CPU 资源。 3. 资源消耗 link Fyne：Fyne 应用程序消耗的系统资源较少, 特别是在内存和 CPU 使用方面。这使得 Fyne 应用在低配置的系统上也能顺畅运行。 Electron：Electron 应用通常消耗更多的内存和 CPU 资源, 特别是在打开多个窗口或运行复杂的应用时, 这在低配置系统上可能会导致性能问题。 4. 开发语言 link Fyne：Fyne 使用 Go 语言开发。Go 语言以其简洁、高效和强大的并发支持而著称, 非常适合开发高性能的服务器和桌面应用。 Electron：Electron对于 Web 开发者而言则非常熟悉。 5. 其它优势 link Fyne 提供了一套统一的、现代的用户界面, 能够在各个平台上看起来一致。其设计风格和用户体验都非常优雅。而得益于 Go 语言的编译特性，Fyne 应用在编译成二进制文件后，更难被逆向工程破解，从而在一定程度上增强了应用的安全性。 6. Fyne 也有一些问题 link Fyne 是一个相对较新的框架,虽然社区也在飞速发展, 但是肯定不能和 Electron 比, Electron 早已有了一个成熟的生态系统。 适用场景 link Fyne：适合开发轻量级、高性能、跨平台的桌面应用，尤其是在对资源消耗和性能要求较高的场景下。\nElectron：适合快速开发跨平台的桌面应用，尤其是已经有 Web 应用或有大量现成 Web 组件的场景。\n对于本教程 link本频道一直对于 Go 很重视, 有很多朋友对于 Go 的 Fyne 学习很有兴趣, 同时, Fyne 也很适合 Go 语言新手上手, 开发出一个不错的 GUI 程序。\n关于热重载(Hot Reload) link定义: Hot Reload 允许开发者在不重新启动整个应用程序的情况下立即看到代码更改的效果。\n通过热重载, 开发者可以大大提高效率。而 Fyne 框架本身不直接内置热重载功能\n快速理解例子:\n如 Vue.js 中，运行 npm run dev, 此命令启动了一个开发服务器, 监视项目中的文件变化, 并在检测到变化时自动重新编译, 而无需重新启动服务器。\n配置基本环境 link略\n项目代码: https://github.com/haveflychi/Fyne-study\n"
            }
        );
    index.add(
            {
                id:  8 ,
                href: "\/docs\/dev\/golang\/fyne\/2.%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%B0%8F%E9%A1%B9%E7%9B%AE\/",
                title: "2.第一个小项目",
                description: "fyne编写第一个小项目",
                content: "基本命令\ngo mod init fyneTest01 fyneTest01可以随便写。\ngo get fyne.io/fyne/v2 GOPATH 介绍说明\n$GOPATH 是一个环境变量，它指定了你的 Go 工作空间的位置。工作空间中往往包含编译后的包文件和可执行文件。\n如何找到它?\ngo env GOPATH 即可。\n成品代码\npackage main import ( \"fmt\" \"fyne.io/fyne/v2/app\" \"fyne.io/fyne/v2/widget\" ) func main() { a:= app.New() w:= a.NewWindow(\"Gofer gogogo\") w.SetContent(widget.NewLabel(\"Gofer gogogo\")) w.ShowAndRun() fmt.Println(\"close!\") } Go 要点: go mod tidy linkgo mod tidy 命令会清理 go.mod 文件，移除不再需要的依赖，并确保所有实际使用的依赖都在文件中声明。同时，它还会更新 go.sum 文件，确保其中的记录是最新的和完整的。\ngo mod tidy 运行程序\ngo run . 即可\nGo 要点: go run . link参考文档 https://shellytw.medium.com/golang-learning-journey-from-an-ex-javascript-developer-1-go-run-and-packages-d107fdff147\n这里的解释简单但是到位。 本教程将都使用这个命令。\nFyne 要点: w.ShowAndRun() linkSyntactic Sugar, 亦可以写成\nw.Show() a.Run() a.run将开启事件循环(Eventloop)\n测试代码\nfmt.Println(\"close!\") Fyne, 你不能同时有两个事件循环, 这是因为事件循环负责处理所有的事件(如用户输入)并协调应用程序中的所有组件和窗口。如果你尝试在同一个应用程序中运行多个事件循环,会导致不一致的状态 只能有一个事件循环。\n"
            }
        );
    index.add(
            {
                id:  9 ,
                href: "\/docs\/dev\/golang\/fyne\/3.%E5%A4%84%E7%90%86%E5%A4%9A%E7%AA%97%E5%8F%A3\/",
                title: "3.处理多窗口问题",
                description: "Fyne支持单个事件循环中管理多个窗口",
                content: "代码案例 link package main import ( \"fyne.io/fyne/v2/app\" \"fyne.io/fyne/v2/container\" \"fyne.io/fyne/v2/widget\" ) func main() { a := app.New() w1 := a.NewWindow(\"Window 1\") w1.SetContent(container.NewVBox( widget.NewLabel(\"Test01\"), )) w2 := a.NewWindow(\"Window 2\") w2.SetContent(container.NewVBox( widget.NewLabel(\"Test02\"), )) w1.Show() w2.Show() a.Run() } "
            }
        );
    index.add(
            {
                id:  10 ,
                href: "\/docs\/dev\/golang\/fyne\/4.go%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80%E5%BF%AB%E9%80%9F%E9%80%9A%E5%85%B3\/",
                title: "4.Go基础速通",
                description: "有Go基础的同学可以跳过",
                content: "代码案例 01 link type Person struct{ Name string Age int Email string } func main() { p := Person{ Name: \"Inkka\", Age: 17, Email: \"inkkaplumbilibili@example.com\", } // 访问结构体字段 fmt.Println(\"Name:\", p.Name) fmt.Println(\"Age:\", p.Age) fmt.Println(\"Email:\", p.Email) // 修改结构体字段 p.Age = 18 fmt.Println(\"Updated Age:\", p.Age) } 代码案例 02 link package main import \"fmt\" func main() { // 初始化一个整数变量 i i := 114514 // 将 i 的值赋给 j j := i // 修改 j 的值 j = 1919810 // 打印 i 和 j 的值 fmt.Println(\"i:\", i) // 输出: i: 114514 fmt.Println(\"j:\", j) // 输出: j: 1919810 } Go 没有引用类型\nhttps://github.com/golang/go/commit/b34f0551387fcf043d65cd7d96a0214956578f94\n代码案例 03 link package main import \"fmt\" func main(){ a := 12 b := \u0026a *b = 13 fmt.Println(a, *b) } 代码案例 04 link type MyStruct struct { Name string age int } func NewMyStruct(name string, age int) *MyStruct { return \u0026MyStruct{ Name: name, age: age, } } 公式\nfunc (接收者变量 接收者类型) 方法名(参数列表) 返回类型 { 函数体 } 代码案例 05 link package main import \"fmt\" type Person struct { name string age int } func main() { p := NewPerson(\"Gopher\", 17) p.Activity() } func NewPerson(name string, age int) *Person { return \u0026Person{ name: name, age: age, } } func (p Person) Activity() { fmt.Println(p.name, p.age) } 代码案例 06 link package main import \"fmt\" type Person struct { name string } func main() { person1 := Person{name: \"Gopher\"} person1.SetName() person1.Activity() } func (p *Person) SetName() { p.name = \"Inkka\" } func (p Person) Activity() { fmt.Println(p.name + \"在写代码\") } TypeScript 参考例:\nsetName(newName: string) { this.name = newName; // 实例属性赋值 } 参考图(图源 Yandex)\n代码案例 07 link package main import \"fmt\" // 定义一个函数，接受一个 int 类型指针参数并修改它 func incrementByReference(val *int) { fmt.Println(1, val) *val++ fmt.Println(\"Inside incrementByReference:\", *val) // 输出: 11 } func main() { num := 10 fmt.Println(2, \u0026num) incrementByReference(\u0026num) fmt.Println(\"Outside incrementByReference:\", num) // 输出: 11 } 代码案例 08 link package main import \"fmt\" // 定义一个函数，接受一个 int 类型参数并试图修改它 func incrementByValue(val int) { val++ fmt.Println(\"Inside incrementByValue:\", val) // 输出: 11 } func main() { num := 10 incrementByValue(num) fmt.Println(\"Outside incrementByValue:\", num) // 输出: 10 } 代码案例 09 link type Animal interface { Speak() string } type Animal interface { Speak(string) string } //补充: 这也可以 type Animal interface { Speak(s string) string } 代码案例 10 link package main import \"fmt\" // 定义 Animal 接口 type Animal interface { Speak() string } // 定义 Dog 结构体 type Dog struct { name string } // 定义 Cat 结构体 type Cat struct { name string } // Dog 实现 Animal 接口的 Speak 方法 func (d Dog) Speak() string { return \"Woof!\" } // Cat 实现 Animal 接口的 Speak 方法 func (c Cat) Speak() string { return \"Nya!\" } // 一个函数，接受 Animal 类型的参数 func MakeAnimalSpeak(a Animal) { fmt.Println(a.Speak()) } func main() { dog := Dog{name: \"Inu\"} cat := Cat{name: \"Neko\"} // Dog 和 Cat 类型都实现了 Animal 接口 MakeAnimalSpeak(dog) // 输出: Woof! MakeAnimalSpeak(cat) // 输出: Nya! } "
            }
        );
    index.add(
            {
                id:  11 ,
                href: "\/docs\/dev\/golang\/fyne\/5.%E6%9B%B4%E5%A4%8D%E6%9D%82%E7%9A%84%E9%A1%B9%E7%9B%AE\/",
                title: "5.更复杂的项目",
                description: "再一次体验 Container, 点击按钮能够实现对应的效果。",
                content: "要求和最终效果 link参考任意一篇 Fyne 官方文档, 可以看到写法:\nfunc makeUI() (*widget.Label, *widget.Entry) { return widget.NewLabel(\"Hello world!\"), widget.NewEntry() } func main() { a := app.New() w := a.NewWindow(\"Hello Person\") w.SetContent(container.NewVBox(makeUI())) w.ShowAndRun() } 所以, 我们也会写makeUI()。\n优势 link 逻辑清晰 便于测试 读法的小提示 link*... 可以读成Pointer to ...。\n成品代码 link package main import ( \"fmt\" \"fyne.io/fyne/v2\" \"fyne.io/fyne/v2/app\" \"fyne.io/fyne/v2/container\" \"fyne.io/fyne/v2/widget\" ) type App struct{ output *widget.Label } var myApp App func (app *App) makeUI()(*widget.Label, *widget.Entry, *widget.Button, *widget.Label, *widget.Button ){ output := widget.NewLabel(\"Gopher Go go go\") entry:= widget.NewEntry() btn := widget.NewButton(\"Click!\", func() { output.SetText(entry.Text) }) app.output = output btn.Importance = widget.HighImportance number := 0 count := widget.NewLabel(fmt.Sprintf(\"Current Number: %d\", number)) incrementbtn := widget.NewButton(\"Click again!\", func() { number++ count.SetText(fmt.Sprintf(\"Current Number: %d\", number)) }) incrementbtn.Importance = widget.DangerImportance return output, entry, btn, count, incrementbtn } func main() { a := app.New() w := a.NewWindow(\"Gopher Go go go!02\") output, entry, btn, count, incrementbtn := myApp.makeUI() w.SetContent(container.NewVBox(output, entry, btn, count, incrementbtn)) w.Resize(fyne.Size{Width: 1600, Height: 1000}) w.ShowAndRun() } "
            }
        );
    index.add(
            {
                id:  12 ,
                href: "\/docs\/dev\/golang\/fyne\/project\/1.markdown%E7%BC%96%E8%BE%91%E5%99%A8\/",
                title: "Fyne-Markdown编辑器",
                description: "Markdown 编辑器\n此项目的要求和最终效果 link能够支持中文, 程序窗口左半边写 markdown, 右边则显示富文本, 也就是现在我们 Vs code 里面的 Preview(プレビュー)\n解决语言问题 linkFyne 默认字体不支持中文, 我们可以复制一下下面的测试文本, 基于我们第一个案例, 会发现是乱码。\npackage main import ( \"fmt\" \"fyne.io/fyne/v2/app\" \"fyne.io/fyne/v2/widget\" ) func main() { a:= app.New() w:= a.NewWindow(\"让我们一起来学习Go语言吧!\") w.SetContent(widget.NewLabel(\"让我们一起来学习Go语言吧!\")) w.ShowAndRun() fmt.Println(\"close!\") } 在项目文件夹中(必要文件), 找到字体文件(NotoSansHans-Regular.ttf)或者亦可以用你喜好的字体。将项目文件夹中的theme.go和util.go复制到项目目录下。\n然后, 在项目中添加如下代码:\ncustomFont := fyne.NewStaticResource(\"NotoSansHans.ttf\", loadFont(\"NotoSansHans-Regular.ttf\")) a.Settings().SetTheme(\u0026myTheme{font: customFont}) 只需要改loadFont内的内容即可。\n实战 Struct 和 Receiver link package main import ( \"fyne.io/fyne/v2\" \"fyne.io/fyne/v2/app\" \"fyne.io/fyne/v2/container\" \"fyne.io/fyne/v2/widget\" ) type config struct { EditWidget *widget.Entry PreviewWidget *widget.RichText CurrentFile fyne.",
                content: "Markdown 编辑器\n此项目的要求和最终效果 link能够支持中文, 程序窗口左半边写 markdown, 右边则显示富文本, 也就是现在我们 Vs code 里面的 Preview(プレビュー)\n解决语言问题 linkFyne 默认字体不支持中文, 我们可以复制一下下面的测试文本, 基于我们第一个案例, 会发现是乱码。\npackage main import ( \"fmt\" \"fyne.io/fyne/v2/app\" \"fyne.io/fyne/v2/widget\" ) func main() { a:= app.New() w:= a.NewWindow(\"让我们一起来学习Go语言吧!\") w.SetContent(widget.NewLabel(\"让我们一起来学习Go语言吧!\")) w.ShowAndRun() fmt.Println(\"close!\") } 在项目文件夹中(必要文件), 找到字体文件(NotoSansHans-Regular.ttf)或者亦可以用你喜好的字体。将项目文件夹中的theme.go和util.go复制到项目目录下。\n然后, 在项目中添加如下代码:\ncustomFont := fyne.NewStaticResource(\"NotoSansHans.ttf\", loadFont(\"NotoSansHans-Regular.ttf\")) a.Settings().SetTheme(\u0026myTheme{font: customFont}) 只需要改loadFont内的内容即可。\n实战 Struct 和 Receiver link package main import ( \"fyne.io/fyne/v2\" \"fyne.io/fyne/v2/app\" \"fyne.io/fyne/v2/container\" \"fyne.io/fyne/v2/widget\" ) type config struct { EditWidget *widget.Entry PreviewWidget *widget.RichText CurrentFile fyne.URI MenuItem *fyne.MenuItem } 正式写代码 linkcontainer.NewHSplit对应的文档: https://docs.fyne.io/api/v2.4/container/split.html\nURI URL 辨析 link URI 是一个用于标识资源的字符串, 它可以是资源的名称、位置或两者的结合。URI 的概念是一个广义的概念, 包含了两类子集：URL 和 URN。\nURL(统一资源定位符) URL 是 URI 的一个子集, 用于指定资源的位置。URL 不仅标识资源, 还提供了定位资源的方法。URL 通常包括以下部分：\n方案(Scheme): 例如 http、https、ftp 等，表示访问资源的协议。 主机(Host): 资源所在的主机名或 IP 地址。 路径(Path): 资源在主机上的具体位置。 查询参数(Query Param): 附加的参数信息，用于传递额外的数据。 片段(Fragment): 资源的一部分，例如网页中的一个锚点。\n举一个例子(锚点): https://ja.wikipedia.org/wiki/Go_(プログラミング言語)#interface\n案例\nhttps://example.com/path/to/resource?query=param#fragment URI例子\nfile:///Users/username/Documents/example.md 代码是最终成品\nFilter(筛选器) link代码\nvar filter = storage.NewExtensionFileFilter([]string{\".md\", \".MD\"}) 提示:\nfunc HasSuffix(s, suffix string) bool { return len(s) \u003e= len(suffix) \u0026\u0026 s[len(s)-len(suffix):] == suffix } 表示方法\ns[len(s)-len(suffix):] 假设 s 为example.md\n放在不同的文件中 link目录说明 link myapp/ |-- main.go |-- test.go main.go及test.go第一行\npackage main main.go更多代码\nfunc main() { ... ... } 附注: 只要在同一个包, 顶层变量和函数就可以互相自由访问。\n生成一个图标 link随意地找一个生成器即可, 格式要求 Icon.png\n最终目录 link myapp/ |-- main.go |-- ui.go |-- config.go 这里只有 Import 相关的内容\nconfig.go\nimport ( \"io\" \"strings\" \"fyne.io/fyne/v2\" \"fyne.io/fyne/v2/dialog\" \"fyne.io/fyne/v2/storage\" ) ui.go\nimport ( \"fyne.io/fyne/v2\" \"fyne.io/fyne/v2/widget\" ) main.go\nimport ( \"fyne.io/fyne/v2\" \"fyne.io/fyne/v2/app\" \"fyne.io/fyne/v2/container\" \"fyne.io/fyne/v2/widget\" ) 综合代码 linkmain.go\ntype config struct { EditWidget *widget.Entry PreviewWidget *widget.RichText CurrentFile fyne.URI MenuItem *fyne.MenuItem BaseTitle string } var cfg config var filter = storage.NewExtensionFileFilter([]string{\".md\", \".MD\"}) func main() { a := app.New() customFont := fyne.NewStaticResource(\"NotoSansHans.ttf\", loadFont(\"NotoSansHans-Regular.ttf\")) a.Settings().SetTheme(\u0026myTheme{font: customFont}) w := a.NewWindow(\"Markdown编辑器\") cfg.BaseTitle = \"Markdown编辑器\" edit, preview := cfg.makeUI() cfg.createMenu(w) w.SetContent(container.NewHSplit(edit, preview)) w.Resize(fyne.Size{Width: 800, Height: 600}) w.CenterOnScreen() w.ShowAndRun() } ui.go\npackage main import ( \"fyne.io/fyne/v2\" \"fyne.io/fyne/v2/widget\" ) func (cfg *config) makeUI() (*widget.Entry, *widget.RichText){ edit := widget.NewMultiLineEntry() preview := widget.NewRichTextFromMarkdown(\"\") cfg.EditWidget = edit cfg.PreviewWidget = preview edit.OnChanged = preview.ParseMarkdown return edit, preview } func (cfg *config) createMenu(win fyne.Window){ open := fyne.NewMenuItem(\"打开...\", cfg.openFunc(win)) save := fyne.NewMenuItem(\"保存\", cfg.saveFunc(win)) cfg.MenuItem = save cfg.MenuItem.Disabled = true saveAs := fyne.NewMenuItem(\"另存为...\", cfg.saveAsFunc(win)) fileMenu := fyne.NewMenu(\"文件\", open, save, saveAs) menu := fyne.NewMainMenu(fileMenu) win.SetMainMenu(menu) } config.go\npackage main import ( \"io/ioutil\" \"strings\" \"fyne.io/fyne/v2\" \"fyne.io/fyne/v2/dialog\" \"fyne.io/fyne/v2/storage\" ) func (cfg *config) saveAsFunc(win fyne.Window) func(){ return func(){ saveDialog := dialog.NewFileSave(func(write fyne.URIWriteCloser, err error){ if err != nil{ dialog.ShowError(err, win) return } if write == nil{ return } if !strings.HasSuffix(strings.ToLower(write.URI().String()),\".md\"){ dialog.ShowInformation(\"错误\", \"必须是.md扩展名\", win) return } write.Write([]uint8(cfg.EditWidget.Text)) cfg.CurrentFile = write.URI() defer write.Close() win.SetTitle(cfg.BaseTitle + \"-\" + write.URI().Name()) cfg.MenuItem.Disabled = false },win) saveDialog.SetFileName(\"未命名.md\") saveDialog.SetFilter(filter) saveDialog.Show() } } func (cfg *config) openFunc(win fyne.Window) func() { return func(){ openDialog := dialog.NewFileOpen(func(read fyne.URIReadCloser, err error){ if err!=nil{ dialog.ShowError(err,win) return } if read == nil{ return } data, err := io.ReadAll(read) if err!=nil{ dialog.ShowError(err,win) return } defer read.Close() cfg.EditWidget.SetText(string(data)) cfg.CurrentFile = read.URI() win.SetTitle(cfg.BaseTitle + \"-\" + read.URI().Name()) cfg.MenuItem.Disabled = false },win) openDialog.SetFilter(filter) openDialog.Show() } } func (cfg *config) saveFunc(win fyne.Window) func() { return func(){ if cfg.CurrentFile != nil{ write, err := storage.Writer(cfg.CurrentFile) if err != nil{ dialog.ShowError(err, win) return } write.Write([]byte(cfg.EditWidget.Text)) defer write.Close() } } } 测试文件 link对应成品代码 link package main import ( \"testing\" \"fyne.io/fyne/v2/container\" \"fyne.io/fyne/v2/test\" ) func Test_makeUI(t *testing.T){ var testCfg config edit, preview := testCfg.makeUI() test.Type(edit, \"Gofjer\") if preview.String() != \"Gofjer\"{ t.Error(\"Failed!!!!\") } } 打包项目 link参考此文档即可: https://docs.fyne.io/started/packaging.html\n"
            }
        );
    index.add(
            {
                id:  13 ,
                href: "\/docs\/dev\/golang\/fyne\/project\/2.%E8%B6%A3%E5%91%B3%E6%95%B4%E6%B4%BB%E9%A1%B9%E7%9B%AE\/",
                title: "Fyne-趣味整活项目",
                description: "全部代码 link package main import ( \"time\" \"fyne.io/fyne/v2\" \"fyne.io/fyne/v2/app\" \"fyne.io/fyne/v2/container\" \"fyne.io/fyne/v2/dialog\" \"fyne.io/fyne/v2/widget\" ) func main() { // 创建一个 Fyne 应用 a := app.New() // 创建一个窗口 customFont := fyne.NewStaticResource(\"NotoSansHans.ttf\", loadFont(\"NotoSansHans-Regular.ttf\")) a.Settings().SetTheme(\u0026myTheme{font: customFont}) win := a.NewWindow(\"高端检测器\") // 创建一个按钮 btn := widget.NewButton(\"检测是否开机\", func() { // 创建一个进度条 progress := widget.NewProgressBarInfinite() progressContainer := container.NewVBox(progress) // 显示加载动画 loadingDialog := dialog.NewCustom(\"正在检测...\", \"取消\", progressContainer, win) loadingDialog.Show() // 模拟加载时间 go func(){ time.Sleep(10 * time.Second) // 10 秒模拟加载时间 // 关闭加载动画并弹出结果窗口 loadingDialog.",
                content: "全部代码 link package main import ( \"time\" \"fyne.io/fyne/v2\" \"fyne.io/fyne/v2/app\" \"fyne.io/fyne/v2/container\" \"fyne.io/fyne/v2/dialog\" \"fyne.io/fyne/v2/widget\" ) func main() { // 创建一个 Fyne 应用 a := app.New() // 创建一个窗口 customFont := fyne.NewStaticResource(\"NotoSansHans.ttf\", loadFont(\"NotoSansHans-Regular.ttf\")) a.Settings().SetTheme(\u0026myTheme{font: customFont}) win := a.NewWindow(\"高端检测器\") // 创建一个按钮 btn := widget.NewButton(\"检测是否开机\", func() { // 创建一个进度条 progress := widget.NewProgressBarInfinite() progressContainer := container.NewVBox(progress) // 显示加载动画 loadingDialog := dialog.NewCustom(\"正在检测...\", \"取消\", progressContainer, win) loadingDialog.Show() // 模拟加载时间 go func(){ time.Sleep(10 * time.Second) // 10 秒模拟加载时间 // 关闭加载动画并弹出结果窗口 loadingDialog.Hide() dialog.ShowInformation(\"结果\", \"电脑是开机的\", win) }() }) // 设置窗口内容 win.SetContent(container.NewVBox(btn)) win.Resize(fyne.Size{Width: 400, Height: 200}) win.CenterOnScreen() win.ShowAndRun() } Go goroutine 简单概念 linkGoroutine 是 Go 语言中的一种轻量级线程, 由 Go 运行时管理。Goroutine 使得并发编程变得更加简单和高效，可以通过关键字 go 启动。\n当然, 每一个并发执行的活动称为goroutine。当一个程序启动时, 只有一个goroutine来调用main函数, 称之为主goroutine。\n特点 link 轻量级：\nGoroutine 非常轻量级, 可以在同一个程序中启动成千上万个 Goroutine, 而不会造成过多的内存开销。 易于使用：\n只需在函数调用前加上 go 关键字, 即可启动一个新的 Goroutine。 并发执行：\nGoroutine 可以并发执行, 不同的 Goroutine 之间可以独立运行, 互不干扰。 调度器管理：\nGo 运行时会自动管理 Goroutine 的调度, 充分利用多核处理器的优势。 Goroutine 示例 link以下是一个简单的 Goroutine 示例：\npackage main import ( \"fmt\" \"time\" ) func sayHello() { for i := 0; i \u003c 5; i++ { fmt.Println(\"Hello\") time.Sleep(1 * time.Second) } } func main() { go sayHello() // 启动一个新的 Goroutine 执行 sayHello 函数 // 主 Goroutine 继续执行其他代码 for i := 0; i \u003c 5; i++ { fmt.Println(\"World\") time.Sleep(1 * time.Second) } // 等待 sayHello 函数执行完成 time.Sleep(6 * time.Second) } 输出情况:\n由于 sayHello 函数在一个新的 goroutine 中执行, 而 main 函数继续执行, 两个函数的输出将会交错在一起。具体的输出可能会有所不同, 有可能是如下面这样\nWorld Hello World Hello ... 而Up主的案例是这样。\nWorld Hello Hello World World Hello Hello World World Hello 上文这就是 Goroutine 的一个非常好的案例\n"
            }
        );
    index.add(
            {
                id:  14 ,
                href: "\/docs\/ops\/1.nginx%E9%85%8D%E7%BD%AE%E5%B0%8F%E5%85%A8\/",
                title: "1.Nginx配置小全",
                description: "Nginx是一款自由的、开源的、高性能的HTTP服务器和反向代理服务器；",
                content: "安装 nginx link下载 nginx 的压缩包文件到根目录，官网下载地址：nginx.org/download/nginx-x.xx.xx.tar.gz\nyum update #更新系统软件 cd / wget nginx.org/download/nginx-1.17.2.tar.gz 解压tar.gz压缩包文件，进去 nginx-1.17.2\ntar -xzvf nginx-1.17.2.tar.gz cd nginx-1.17.2 进入文件夹后进行配置检查\n通过安装前的配置检查，发现有报错。检查中发现一些依赖库没有找到，这时候需要先安装nginx的一些依赖库\nyum -y install pcre* #安装使nginx支持rewrite yum -y install gcc-c++ yum -y install zlib* yum -y install openssl openssl-devel 再次进行检查操作 ./configure 没发现报错显示，接下来进行编译并安装的操作\n// 检查模块支持 ./configure --prefix=/usr/local/nginx --with-http_ssl_module --with-http_v2_module --with-http_realip_module --with-http_addition_module --with-http_sub_module --with-http_dav_module --with-http_flv_module --with-http_mp4_module --with-http_gunzip_module --with-http_gzip_static_module --with-http_auth_request_module --with-http_random_index_module --with-http_secure_link_module --with-http_degradation_module --with-http_slice_module --with-http_stub_status_module --with-mail --with-mail_ssl_module --with-stream --with-stream_ssl_module --with-stream_realip_module --with-stream_ssl_preread_module --with-threads --user=www --group=www 这里得特别注意下，你以后需要用到的功能模块是否存在，不然以后添加新的包会比较麻烦。\n查看默认安装的模块支持\n命令 ls nginx-1.17.2 查看 nginx 的文件列表，可以发现里面有一个 auto 的目录。\n在这个 auto 目录中有一个 options 文件，这个文件里面保存的就是 nginx 编译过程中的所有选项配置。\n通过命令：cat nginx-1.17.2/auto/options | grep YES就可以查看\nnginx 编译安装时，怎么查看安装模块 (opens new window)\n编译并安装\n这里需要注意，模块的支持跟后续的nginx配置有关，比如 SSL，gzip 压缩等等，编译安装前最好检查需要配置的模块存不存在。\n查看 nginx 安装后在的目录，可以看到已经安装到 /usr/local/nginx 目录了\nwhereis nginx $nginx: /usr/local/nginx 启动 nginx 服务\ncd /usr/local/nginx/sbin/ ./nginx 服务启动的时候报错了：nginx: [emerg] bind() to 0.0.0.0:80 failed (98: Address already in use) ，通过命令查看本机网络地址和端口等一些信息，找到被占用的 80 端口 netstat -ntpl 的 tcp 连接，并杀死进程(kill 进程 pid)\nnetstat -ntpl kill 进程PID 继续启动 nginx 服务，启动成功\n在浏览器直接访问 ip 地址，页面出现 Welcome to Nginx! 则安装成功。\nnginx 配置 link基本结构 link main # 全局配置，对全局生效 ├── events # 配置影响 nginx 服务器或与用户的网络连接 ├── http # 配置代理，缓存，日志定义等绝大多数功能和第三方模块的配置 │ ├── upstream # 配置后端服务器具体地址，负载均衡配置不可或缺的部分 │ ├── server # 配置虚拟主机的相关参数，一个 http 块中可以有多个 server 块 │ ├── server │ │ ├── location # server 块可以包含多个 location 块，location 指令用于匹配 uri │ │ ├── location │ │ └── ... │ └── ... └── ... 主要配置含义 link main:nginx 的全局配置，对全局生效。 events:配置影响 nginx 服务器或与用户的网络连接。 http：可以嵌套多个 server，配置代理，缓存，日志定义等绝大多数功能和第三方模块的配置。 server：配置虚拟主机的相关参数，一个 http 中可以有多个server。 location：配置请求的路由，以及各种页面的处理情况。 upstream：配置后端服务器具体地址，负载均衡配置不可或缺的部分。 nginx.conf 配置文件的语法规则 link 配置文件由指令与指令块构成 每条指令以 “;” 分号结尾，指令与参数间以空格符号分隔 指令块以 {} 大括号将多条指令组织在一起 include 语句允许组合多个配置文件以提升可维护性 通过 # 符号添加注释，提高可读性 通过 $ 符号使用变量 部分指令的参数支持正则表达式，例如常用的 location 指令 内置变量 linknginx 常用的内置全局变量，你可以在配置中随意使用：\nTCP UDP $host 请求信息中的 Host，如果请求中没有 Host 行，则等于设置的服务器名 $request_method 客户端请求类型，如 GET、POST $remote_addr 客户端的 IP 地址 $args 请求中的参数 $content_length 请求头中的 Content-length 字段 $http_user_agent 客户端 agent 信息 $http_cookie 客户端cookie信息 $remote_port 客户端的端口 $server_protocol 请求使用的协议，如 HTTP/1.1 $server_addr 服务器地址 $server_name 服务器名称 $server_port 服务器的端口号 常用命令 link这里列举几个常用的命令：\nnginx -s reload # 向主进程发送信号，重新加载配置文件，热重启 nginx -s reopen # 重启 Nginx nginx -s stop # 快速关闭 nginx -s quit # 等待工作进程处理完成后关闭 nginx -T # 查看当前 Nginx 最终的配置 nginx -t -c \u003c配置路径\u003e # 检查配置是否有问题，如果已经在配置目录，则不需要 -c 以上命令通过 nginx -h 就可以查看到，还有其它不常用这里未列出。\nLinux 系统应用管理工具 systemd 关于 nginx 的常用命令：\nsystemctl start nginx # 启动 Nginx systemctl stop nginx # 停止 Nginx systemctl restart nginx # 重启 Nginx systemctl reload nginx # 重新加载 Nginx，用于修改配置后 systemctl enable nginx # 设置开机启动 Nginx systemctl disable nginx # 关闭开机启动 Nginx systemctl status nginx # 查看 Nginx 运行状态 配置 nginx 开机自启 link利用 systemctl 命令：\n如果用 yum install 命令安装的 nginx，yum 命令会自动创建 nginx.service 文件，直接用命令:\nsystemctl enable nginx # 设置开机启动 Nginx systemctl disable nginx # 关闭开机启动 Nginx 就可以设置开机自启，否则需要在系统服务目录里创建 nginx.service 文件。\n创建并打开 nginx.service 文件：\nvi /lib/systemd/system/nginx.service 内容如下：\n[Unit] Description=nginx After=network.target [Service] Type=forking ExecStart=/usr/local/nginx/sbin/nginx ExecReload=/usr/local/nginx/sbin/nginx -s reload ExecStop=/usr/local/nginx/sbin/nginx -s quit PrivateTmp=true [Install] WantedBy=multi-user.target :wq 保存退出，运行 systemctl daemon-reload 使文件生效。\n这样便可以通过以下命令操作 nginx 了：\nsystemctl start nginx.service # 启动nginx服务 systemctl enable nginx.service # 设置开机启动 systemctl disable nginx.service # 停止开机自启动 systemctl status nginx.service　# 查看服务当前状态 systemctl restart nginx.service # 重新启动服务 systemctl is-enabled nginx.service #查询服务是否开机启动 通过开机启动命令脚本实现开机自启\n创建开机启动命令脚本文件：\n在这个 nginx 文件中插入一下启动脚本代码，启动脚本代码来源网络复制，实测有效：\n#! /bin/bash # chkconfig: - 85 15 PATH=/usr/local/nginx DESC=\"nginx daemon\" NAME=nginx DAEMON=$PATH/sbin/$NAME CONFIGFILE=$PATH/conf/$NAME.conf PIDFILE=$PATH/logs/$NAME.pid scriptNAME=/etc/init.d/$NAME set -e [ -x \"$DAEMON\" ] || exit 0 do_start() { $DAEMON -c $CONFIGFILE || echo -n \"nginx already running\" } do_stop() { $DAEMON -s stop || echo -n \"nginx not running\" } do_reload() { $DAEMON -s reload || echo -n \"nginx can't reload\" } case \"$1\" in start) echo -n \"Starting $DESC: $NAME\" do_start echo \".\" ;; stop) echo -n \"Stopping $DESC: $NAME\" do_stop echo \".\" ;; reload|graceful) echo -n \"Reloading $DESC configuration...\" do_reload echo \".\" ;; restart) echo -n \"Restarting $DESC: $NAME\" do_stop do_start echo \".\" ;; *) echo \"Usage: $scriptNAME {start|stop|reload|restart}\" \u003e\u00262 exit 3 ;; esac exit 0 设置所有人都有对这个启动脚本 nginx 文件的执行权限：\nchmod a+x /etc/init.d/nginx 把nginx加入系统服务中：\n把服务设置为开机启动：\nreboot 重启系统生效，可以使用上面 systemctl 方法相同的命令：\nsystemctl start nginx.service # 启动nginx服务 systemctl enable nginx.service # 设置开机启动 systemctl disable nginx.service # 停止开机自启动 systemctl status nginx.service　# 查看服务当前状态 systemctl restart nginx.service # 重新启动服务 systemctl is-enabled nginx.service #查询服务是否开机启动 如果服务启动的时候出现 Restarting nginx daemon: nginxnginx: [error] open() \"/usr/local/nginx/logs/nginx.pid\" failed (2: No such file or directory) nginx not running 的错误，通过nginx -c 参数指定配置文件即可解决\n/usr/local/nginx/sbin/nginx -c /usr/local/nginx/conf/nginx.conf 如果服务启动中出现 nginx: [emerg] bind() to 0.0.0.0:80 failed (98: Address already in use) 的错误，可以先通过 service nginx stop 停止服务，再启动就好。\n配置 nginx 全局可用 link当你每次改了 nginx.conf 配置文件的内容都需要重新到 nginx 启动目录去执行命令，或者通过 -p 参数指向特定目录，会不会感觉很麻烦？\n例如： 直接执行 nginx -s reload 会报错 -bash: nginx: command not found，需要到 /usr/local/nginx/sbin 目录下面去执行，并且是执行 ./nginx -s reload。\n这里有两种方式可以解决，一种是通过脚本对 nginx 命令包装，这里介绍另外一种比较简单：通过把 nginx 配置到环境变量里，用 nginx 执行指令即可。步骤如下：\n1、编辑 /etc/profile\n2、在最后一行添加配置，:wq 保存\nexport PATH=$PATH:/usr/local/nginx/sbin 3、使配置立即生效\n这样就可以愉快的直接在全局使用 nginx 命令了。\nnginx 常用功能 link反向代理 link我们最常说的反向代理的是通过反向代理解决跨域问题。\n其实反向代理还可以用来控制缓存（代理缓存 proxy cache），进行访问控制等等，以及后面说的负载均衡其实都是通过反向代理来实现的。\nserver { listen 8080; # 用户访问 ip:8080/test 下的所有路径代理到 github location /test { proxy_pass https://github.com; } # 所有 /api 下的接口访问都代理到本地的 8888 端口 # 例如你本地运行的 java 服务的端口是 8888，接口都是以 /api 开头 location /api { proxy_pass http://127.0.0.1:8888; } } 访问控制 link server { location ~ ^/index.html { # 匹配 index.html 页面 除了 127.0.0.1 以外都可以访问 deny 192.168.1.1; deny 192.168.1.2; allow all; } } 上面的命令表示禁止 192.168.1.1 和 192.168.1.2 两个 ip 访问，其它全部允许。从上到下的顺序，匹配到了便跳出，可以按你的需求设置。\n负载均衡 link通过负载均衡充利用服务器资源，nginx 目前支持自带 4 种负载均衡策略，还有 2 种常用的第三方策略。\n轮询策略（默认）\n每个请求按时间顺序逐一分配到不同的后端服务器，如果有后端服务器挂掉，能自动剔除。但是如果其中某一台服务器压力太大，出现延迟，会影响所有分配在这台服务器下的用户。\nhttp { upstream test.com { server 192.168.1.12:8887; server 192.168.1.13:8888; } server { location /api { proxy_pass http://test.com; } } } 根据服务器权重\n例如要配置：10 次请求中大概 1 次访问到 8888 端口，9 次访问到 8887 端口：\nhttp { upstream test.com { server 192.168.1.12:8887 weight=9; server 192.168.1.13:8888 weight=1; } server { location /api { proxy_pass http://test.com; } } } 客户端 ip 绑定（ip_hash）\n来自同一个 ip 的请求永远只分配一台服务器，有效解决了动态网页存在的 session 共享问题。例如：比如把登录信息保存到了 session 中，那么跳转到另外一台服务器的时候就需要重新登录了。\n所以很多时候我们需要一个客户只访问一个服务器，那么就需要用 ip_hash 了。\nhttp { upstream test.com { ip_hash; server 192.168.1.12:8887; server 192.168.1.13:8888; } server { location /api { proxy_pass http://test.com; } } } 最小连接数策略\n将请求优先分配给压力较小的服务器，它可以平衡每个队列的长度，并避免向压力大的服务器添加更多的请求。\nhttp { upstream test.com { least_conn; server 192.168.1.12:8887; server 192.168.1.13:8888; } server { location /api { proxy_pass http://test.com; } } } 最快响应时间策略（依赖于第三方 NGINX Plus）\n依赖于 NGINX Plus，优先分配给响应时间最短的服务器。\nhttp { upstream test.com { fair; server 192.168.1.12:8887; server 192.168.1.13:8888; } server { location /api { proxy_pass http://test.com; } } } 按访问url的hash结果（第三方）\n按访问 url 的 hash 结果来分配请求，使每个 url 定向到同一个后端服务器，后端服务器为缓存时比较有效。 在 upstream 中加入 hash 语句，server 语句中不能写入 weight 等其他的参数，hash_method 是使用的 hash 算法\nhttp { upstream test.com { hash $request_uri; hash_method crc32; server 192.168.1.12:8887; server 192.168.1.13:8888; } server { location /api { proxy_pass http://test.com; } } } 采用 HAproxy 的 loadbalance uri 或者 nginx 的 upstream_hash 模块，都可以做到针对 url 进行哈希算法式的负载均衡转发。\ngzip 压缩 link开启 gzip 压缩可以大幅减少 http 传输过程中文件的大小，可以极大的提高网站的访问速度，基本是必不可少的优化操作：\ngzip on; # 开启gzip 压缩 # gzip_types # gzip_static on; # gzip_proxied expired no-cache no-store private auth; # gzip_buffers 16 8k; gzip_min_length 1k; gzip_comp_level 4; gzip_http_version 1.0; gzip_vary off; gzip_disable \"MSIE [1-6]\\.\"; 解释一下：\ngzip_types：要采用 gzip 压缩的 MIME 文件类型，其中 text/html 被系统强制启用； gzip_static：默认 off，该模块启用后，Nginx 首先检查是否存在请求静态文件的 gz 结尾的文件，如果有则直接返回该 .gz 文件内容； gzip_proxied：默认 off，nginx 做为反向代理时启用，用于设置启用或禁用从代理服务器上收到相应内容 gzip 压缩； gzip_buffers：获取多少内存用于缓存压缩结果，16 8k 表示以 8k*16 为单位获得； gzip_min_length：允许压缩的页面最小字节数，页面字节数从 header 头中的 Content-Length 中进行获取。默认值是 0，不管页面多大都压缩。建议设置成大于 1k 的字节数，小于 1k 可能会越压越大； gzip_comp_level：gzip 压缩比，压缩级别是 1-9，1 压缩级别最低，9 最高，级别越高压缩率越大，压缩时间越长，建议 4-6； gzip_http_version：默认 1.1，启用 gzip 所需的 HTTP 最低版本； gzip_vary：用于在响应消息头中添加 Vary：Accept-Encoding，使代理服务器根据请求头中的 Accept-Encoding 识别是否启用 gzip 压缩； gzip_disable 指定哪些不需要 gzip 压缩的浏览器 其中第 2 点，普遍是结合前端打包的时候打包成 gzip 文件后部署到服务器上，这样服务器就可以直接使用 gzip 的文件了，并且可以把压缩比例提高，这样 nginx 就不用压缩，也就不会影响速度。一般不追求极致的情况下，前端不用做任何配置就可以使用啦~\n附前端 webpack 开启 gzip 压缩配置，在 vue-cli3 的 vue.config.js 配置文件中： const CompressionWebpackPlugin = require('compression-webpack-plugin') module.exports = { // gzip 配置 configureWebpack: config =\u003e { if (process.env.NODE_ENV === 'production') { // 生产环境 return { plugins: [new CompressionWebpackPlugin({ test: /\\.js$|\\.html$|\\.css/, // 匹配文件名 threshold: 1024, // 文件压缩阈值，对超过 1k 的进行压缩 deleteOriginalAssets: false // 是否删除源文件 })] } } }, ... } HTTP服务器 linknginx 本身也是一个静态资源的服务器，当只有静态资源的时候，就可以使用 nginx 来做服务器：\nserver { listen 80; server_name localhost; location / { root /usr/local/app; index index.html; } } 这样如果访问 http://ip 就会默认访问到 /usr/local/app 目录下面的 index.html，如果一个网站只是静态页面的话，那么就可以通过这种方式来实现部署，比如一个静态官网。\n动静分离 link就是把动态和静态的请求分开。方式主要有两种：\n一种是纯粹把静态文件独立成单独的域名，放在独立的服务器上，也是目前主流推崇的方案 一种方法就是动态跟静态文件混合在一起发布， 通过 nginx 配置来分开 # 所有静态请求都由nginx处理，存放目录为 html location ~ \\.(gif|jpg|jpeg|png|bmp|swf|css|js)$ { root /usr/local/resource; expires 10h; # 设置过期时间为10小时 } # 所有动态请求都转发给 tomcat 处理 location ~ \\.(jsp|do)$ { proxy_pass 127.0.0.1:8888; } 注意上面设置了 expires，当 nginx 设置了 expires 后，例如设置为：expires 10d; 那么，所在的 location 或 if 的内容，用户在 10 天内请求的时候，都只会访问浏览器中的缓存，而不会去请求 nginx 。\n请求限制 link对于大流量恶意的访问，会造成带宽的浪费，给服务器增加压力。可以通过 nginx 对于同一 IP 的连接数以及并发数进行限制。合理的控制还可以用来防止 DDos 和 CC 攻击。\n关于请求限制主要使用 nginx 默认集成的 2 个模块：\nlimit_conn_module 连接频率限制模块 limit_req_module 请求频率限制模块 涉及到的配置主要是：\nlimit_req_zone 限制请求数 limit_conn_zone 限制并发连接数 通过 limit_req_zone 限制请求数\nhttp{ limit_conn_zone $binary_remote_addrzone=limit:10m; // 设置共享内存空间大 server{ location /{ limit_conn addr 5; # 同一用户地址同一时间只允许有5个连接。 } } } 如果共享内存空间被耗尽，服务器将会对后续所有的请求返回 503 (Service Temporarily Unavailable) 错误。\n当多个 limit_conn_zone 指令被配置时，所有的连接数限制都会生效。比如，下面配置不仅会限制单一 IP 来源的连接数，同时也会限制单一虚拟服务器的总连接数：\nlimit_conn_zone $binary_remote_addr zone=perip:10m; limit_conn_zone $server_name zone=perserver:10m; server { limit_conn perip 10; # 限制每个 ip 连接到服务器的数量 limit_conn perserver 2000; # 限制连接到服务器的总数 } 通过 limit_conn_zone 限制并发连接数\nlimit_req_zone $binary_remote_addr zone=creq:10 mrate=10r/s; server{ location /{ limit_req zone=creq burst=5; } } 限制平均每秒不超过一个请求，同时允许超过频率限制的请求数不多于5个。 如果不希望超过的请求被延迟，可以用 nodelay 参数,如：\nlimit_req zone=creq burst=5 nodelay;\n这里只是简单讲讲，让大家有这个概念，配置的时候可以深入去找找资料。\n正向代理 link正向代理，意思是一个位于客户端和原始服务器(origin server)之间的服务器，为了从原始服务器取得内容，客户端向代理发送一个请求并指定目标(原始服务器)，然后代理向原始服务器转交请求并将获得的内容返回给客户端。客户端才能使用正向代理，比如我们使用的 VPN 服务就是正向代理，直观区别（图片来源于 前端开发者必备的 Nginx 知识 (opens new window)）：\n配置正向代理：\nresolver 8.8.8.8 # 谷歌的域名解析地址 server { resolver_timeout 5s; // 设超时时间 location / { # 当客户端请求我的时候，我会把请求转发给它 # $host 要访问的主机名 $request_uri 请求路径 proxy_pass http://$host$request_uri; } } 正向代理的对象是客户端，服务器端看不到真正的客户端。\n图片防盗链 link server { listen 80; server_name *.test; # 图片防盗链 location ~* \\.(gif|jpg|jpeg|png|bmp|swf)$ { valid_referers none blocked server_names ~\\.google\\. ~\\.baidu\\. *.qq.com; # 只允许本机 IP 外链引用，将百度和谷歌也加入白名单有利于 SEO if ($invalid_referer){ return 403; } } } 以上设置就能防止其它网站利用外链访问我们的图片，有利于节省流量\n适配 PC 或移动设备 link根据用户设备不同返回不同样式的站点，以前经常使用的是纯前端的自适应布局，但是复杂的网站并不适合响应式，无论是复杂性和易用性上面还是不如分开编写的好，比如我们常见的淘宝、京东。\n根据用户请求的 user-agent 来判断是返回 PC 还是 H5 站点：\nserver { listen 80; server_name test.com; location / { root /usr/local/app/pc; # pc 的 html 路径 if ($http_user_agent ~* '(Android|webOS|iPhone|iPod|BlackBerry)') { root /usr/local/app/mobile; # mobile 的 html 路径 } index index.html; } } 设置二级域名 link新建一个 server 即可：\nserver { listen 80; server_name admin.test.com; // 二级域名 location / { root /usr/local/app/admin; # 二级域名的 html 路径 index index.html; } } 配置 HTTPS link这里我使用的是 certbot 免费证书，但申请一次有效期只有3个月（好像可以用 crontab 尝试配置自动续期，我暂时没试过）：\n先安装 certbot\nwget https://dl.eff.org/certbot-auto chmod a+x certbot-auto 申请证书（注意：需要把要申请证书的域名先解析到这台服务器上，才能申请）:\nsudo ./certbot-auto certonly --standalone --email admin@abc.com -d test.com -d www.test.com 执行上面指令，按提示操作。\nCertbot 会启动一个临时服务器来完成验证（会占用 80 端口或 443 端口，因此需要暂时关闭 Web 服务器），然后 Certbot 会把证书以文件的形式保存，包括完整的证书链文件和私钥文件。\n文件保存在 /etc/letsencrypt/live/ 下面的域名目录下。\n修改 nginx 配置：\nserver{ listen 443 ssl http2; // 这里还启用了 http/2.0 ssl_certificate /etc/letsencrypt/live/test.com/fullchain.pem; # 证书文件地址 ssl_certificate_key /etc/letsencrypt/live/test.com/privkey.pem; # 私钥文件地址 server_name test.com www.test.com; // 证书绑定的域名 } 配置 HTTP 转 HTTPS link server { listen 80; server_name test.com www.test.com; # 单域名重定向 if ($host = 'www.sherlocked93.club'){ return 301 https://www.sherlocked93.club$request_uri; } # 全局非 https 协议时重定向 if ($scheme != 'https') { return 301 https://$server_name$request_uri; } # 或者全部重定向 return 301 https://$server_name$request_uri; } 以上配置选择自己需要的一条即可，不用全部加。\n单页面项目 history 路由配置 link server { listen 80; server_name fe.sherlocked93.club; location / { root /usr/local/app/dist; # vue 打包后的文件夹 index index.html index.htm; try_files $uri $uri/ /index.html @rewrites; # 默认目录下的 index.html，如果都不存在则重定向 expires -1; # 首页一般没有强制缓存 add_header Cache-Control no-cache; } location @rewrites { // 重定向设置 rewrite ^(.+)$ /index.html break; } } vue-router (opens new window) 官网只有一句话 try_files $uri $uri/ /index.html;，而上面做了一些重定向处理。\n配置高可用集群（双机热备） link当主 nginx 服务器宕机之后，切换到备份的 nginx 服务器\n首先安装 keepalived:\nyum install keepalived -y 1\n然后编辑 /etc/keepalived/keepalived.conf 配置文件，并在配置文件中增加 vrrp_script 定义一个外围检测机制，并在 vrrp_instance 中通过定义 track_script 来追踪脚本执行过程，实现节点转移：\nglobal_defs{ notification_email { cchroot@gmail.com } notification_email_from test@firewall.loc smtp_server 127.0.0.1 smtp_connect_timeout 30 // 上面都是邮件配置 router_id LVS_DEVEL // 当前服务器名字，用 hostname 命令来查看 } vrrp_script chk_maintainace { // 检测机制的脚本名称为chk_maintainace script \"[[ -e/etc/keepalived/down ]] \u0026\u0026 exit 1 || exit 0\" // 可以是脚本路径或脚本命令 // script \"/etc/keepalived/nginx_check.sh\" // 比如这样的脚本路径 interval 2 // 每隔2秒检测一次 weight -20 // 当脚本执行成立，那么把当前服务器优先级改为-20 } vrrp_instanceVI_1 { // 每一个vrrp_instance就是定义一个虚拟路由器 state MASTER // 主机为MASTER，备用机为BACKUP interface eth0 // 网卡名字，可以从ifconfig中查找 virtual_router_id 51 // 虚拟路由的id号，一般小于255，主备机id需要一样 priority 100 // 优先级，master的优先级比backup的大 advert_int 1 // 默认心跳间隔 authentication { // 认证机制 auth_type PASS auth_pass 1111 // 密码 } virtual_ipaddress { // 虚拟地址vip 172.16.2.8 } } 其中检测脚本 nginx_check.sh，这里提供一个：\n#!/bin/bash A=`ps -C nginx --no-header | wc -l` if [ $A -eq 0 ];then /usr/sbin/nginx # 尝试重新启动nginx sleep 2 # 睡眠2秒 if [ `ps -C nginx --no-header | wc -l` -eq 0 ];then killall keepalived # 启动失败，将keepalived服务杀死。将vip漂移到其它备份节点 fi fi 复制一份到备份服务器，备份 nginx 的配置要将 state 后改为 BACKUP，priority 改为比主机小。 设置完毕后各自 service keepalived start 启动，经过访问成功之后，可以把 Master 机的 keepalived 停掉，此时 Master 机就不再是主机了 service keepalived stop，看访问虚拟 IP 时是否能够自动切换到备机 ip addr。\n再次启动 Master 的 keepalived，此时 vip 又变到了主机上。\n配置高可用集群的内容来源于：Nginx 从入门到实践，万字详解！ (opens new window)\n其它功能和技巧 link代理缓存 linknginx 的 http_proxy 模块，提供类似于 Squid 的缓存功能，使用 proxy_cache_path 来配置。\nnginx 可以对访问过的内容在 nginx 服务器本地建立副本，这样在一段时间内再次访问该数据，就不需要通过 nginx 服务器再次向后端服务器发出请求，减小数据传输延迟，提高访问速度：\nproxy_cache_path usr/local/cache levels=1:2 keys_zone=my_cache:10m; server { listen 80; server_name test.com; location / { proxy_cache my_cache; proxy_pass http://127.0.0.1:8888; proxy_set_header Host $host; } } 上面的配置表示： nginx 提供一块 10 M 的内存用于缓存，名字为 my_cache, levels 等级为 1:2，缓存存放的路径为 usr/local/cache。\n访问日志 link访问日志默认是注释的状态，需要可以打开和进行更详细的配置，一下是 nginx 的默认配置：\nhttp { log_format main '$remote_addr - $remote_user [$time_local] \"$request\" ' '$status $body_bytes_sent \"$http_referer\" ' '\"$http_user_agent\" \"$http_x_forwarded_for\"'; access_log logs/access.log main; } 错误日志 link错误日志放在 main 全局区块中，童鞋们打开 nginx.conf 就可以看见在配置文件中和下面一样的代码了：\n#error_log logs/error.log; #error_log logs/error.log notice; #error_log logs/error.log info; nginx 错误日志默认配置为：\nerror_log logs/error.log error;\n静态资源服务器 link server { listen 80; server_name static.bin; charset utf-8; # 防止中文文件名乱码 location /download { alias /usr/share/nginx/static; # 静态资源目录 autoindex on; # 开启静态资源列目录，浏览目录权限 autoindex_exact_size off; # on(默认)显示文件的确切大小，单位是byte；off显示文件大概大小，单位KB、MB、GB autoindex_localtime off; # off(默认)时显示的文件时间为GMT时间；on显示的文件时间为服务器时间 } } 禁止指定 user_agent linknginx 可以禁止指定的浏览器和爬虫框架访问：\n# http_user_agent 为浏览器标识 # 禁止 user_agent 为baidu、360和sohu，~*表示不区分大小写匹配 if ($http_user_agent ~* 'baidu|360|sohu') { return 404; } # 禁止 Scrapy 等工具的抓取 if ($http_user_agent ~* (Scrapy|Curl|HttpClient)) { return 403; } 请求过滤 link根据请求类型过滤\n# 非指定请求全返回 403 if ( $request_method !~ ^(GET|POST|HEAD)$ ) { return 403; } 根据状态码过滤\nerror_page 502 503 /50x.html; location = /50x.html { root /usr/share/nginx/html; } 这样实际上是一个内部跳转，当访问出现 502、503 的时候就能返回 50x.html 中的内容，这里需要注意是否可以找到 50x.html 页面，所以加了个 location 保证找到你自定义的 50x 页面。\n根据URL名称过滤\nif ($host = zy.com' ) { #其中$1是取自regex部分()里的内容,匹配成功后跳转到的URL。 rewrite ^/(.*)$ http://www.zy.com/$1 permanent； } location /test { // /test 全部重定向到首页 rewrite ^(.*)$ /index.html redirect; } ab 命令 linkab命令全称为：Apache bench，是 Apache 自带的压力测试工具，也可以测试 Nginx、IIS 等其他 Web 服务器:\n-n 总共的请求数 -c 并发的请求数 -t 测试所进行的最大秒数，默认值 为 50000 -p 包含了需要的 POST 的数据文件 -T POST数据所使用的 Content-type 头信息 ab -n 1000 -c 5000 http://127.0.0.1/ # 每次发送1000并发的请求数，请求数总数为5000。 1\n测试前需要安装 httpd-tools： yum install httpd-tools\n泛域名路径分离 link这是一个非常实用的技能，经常有时候我们可能需要配置一些二级或者三级域名，希望通过 nginx 自动指向对应目录，比如：\ntest1.doc.test.club 自动指向 /usr/local/html/doc/test1 服务器地址； test2.doc.test.club 自动指向 /usr/local/html/doc/test2 服务器地址； server { listen 80; server_name ~^([\\w-]+)\\.doc\\.test\\.club$; root /usr/local/html/doc/$1; } 泛域名转发 link和之前的功能类似，有时候我们希望把二级或者三级域名链接重写到我们希望的路径，让后端就可以根据路由解析不同的规则：\ntest1.serv.test.club/api?name=a 自动转发到 127.0.0.1:8080/test1/api?name=a test2.serv.test.club/api?name=a 自动转发到 127.0.0.1:8080/test2/api?name=a server { listen 80; server_name ~^([\\w-]+)\\.serv\\.test\\.club$; location / { proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header Host $http_host; proxy_set_header X-NginX-Proxy true; proxy_pass http://127.0.0.1:8080/$1$request_uri; } } 常见问题 linknginx 中怎么设置变量 link或许你不知道，nginx 的配置文件使用的是一门微型的编程语言。既然是编程语言，一般也就少不了“变量”这种东西，但是在 nginx 配置中，变量只能存放一种类型的值，因为也只存在一种类型的值，那就是字符串。\n例如我们在 nginx.conf 中有这样一行配置：\n上面使用了 set 配置指令对变量 $name进行了赋值操作，把 “chroot” 赋值给了 $name。nginx 变量名前面有一个 $ 符号，这是记法上的要求。所有的 Nginx 变量在 Nginx 配置文件中引用时都须带上 $ 前缀。这种表示方法和 Perl、PHP 这些语言是相似的。\n这种表示方法的用处在哪里呢，那就是可以直接把变量嵌入到字符串常量中以构造出新的字符串，例如你需要进行一个字符串拼接：\nserver { listen 80; server_name test.com; location / { set $temp hello; return \"$temp world\"; } } 以上当匹配成功的时候就会返回字符串 “hello world” 了。需要注意的是，当引用的变量名之后紧跟着变量名的构成字符时（比如后跟字母、数字以及下划线），我们就需要使用特别的记法来消除歧义，例如：\nserver { listen 80; server_name test.com; location / { set $temp \"hello \"; return \"${temp}world\"; } } 这里，我们在配置指令的参数值中引用变量 $temp 的时候，后面紧跟着 world 这个单词，所以如果直接写作 \"$tempworld\" 则 nginx 的计算引擎会将之识别为引用了变量 $tempworld. 为了解决这个问题，nginx 的字符串支持使用花括号在 $ 之后把变量名围起来，比如这里的 ${temp}，所以 上面这个例子返回的还是 “hello world”：\n$ curl 'http://test.com/' hello world 还需要注意的是，若是想输出 $ 符号本身，可以这样做：\ngeo $dollar { default \"$\"; } server { listen 80; server_name test.com; location / { set $temp \"hello \"; return \"${temp}world: $dollar\"; } } 上面用到了标准模块 ngx_geo 提供的配置指令 geo 来为变量 $dollar 赋予字符串 \"$\" ，这样，这里的返回值就是 “hello world: $” 了。\n附 nginx 内置预定义变量 link按字母顺序：\n变量名 定义 $arg_PARAMETER GET 请求中变量名 PARAMETER 参数的值 $args 这个变量等于 GET 请求中的参数，例如，foo=123\u0026bar=blahblah;这个变量只可以被修改 $binary_remote_addr 二进制码形式的客户端地址 $body_bytes_sent 传送页面的字节数 $content_length 请求头中的 Content-length 字段 $content_type 请求头中的 Content-Type 字段 $cookie_COOKIE cookie COOKIE 的值 $document_root 当前请求在 root 指令中指定的值 $document_uri 与 $uri 相同 $host 请求中的主机头(Host)字段，如果请求中的主机头不可用或者空，则为处理请求的 server 名称(处理请求的 server 的 server_name 指令的值)。值为小写，不包含端口。 $hostname 机器名使用 gethostname 系统调用的值 $http_HEADER HTTP 请求头中的内容，HEADER 为 HTTP 请求中的内容转为小写，-变为_(破折号变为下划线)，例如：$http_user_agent(Uaer-Agent 的值) $sent_http_HEADER HTTP 响应头中的内容，HEADER 为 HTTP 响应中的内容转为小写，-变为_(破折号变为下划线)，例如：$sent_http_cache_control、$sent_http_content_type… $is_args 如果 $args 设置，值为\"?\"，否则为\"\" $limit_rate 这个变量可以限制连接速率 $nginx_version 当前运行的 nginx 版本号 $query_string 与 $args 相同 $remote_addr 客户端的IP地址 $remote_port 客户端的端口 $remote_port 已经经过 Auth Basic Module 验证的用户名 $request_filename 当前连接请求的文件路径，由 root 或 alias 指令与 URI 请求生成 $request_body 这个变量（0.7.58+）包含请求的主要信息。在使用 proxy_pass 或 fastcgi_pass 指令的 location 中比较有意义 $request_body_file 客户端请求主体信息的临时文件名 $request_completion 如果请求成功，设为\"OK\"；如果请求未完成或者不是一系列请求中最后一部分则设为空 $request_method 这个变量是客户端请求的动作，通常为 GET 或 POST。包括 0.8.20 及之前的版本中，这个变量总为 main request 中的动作，如果当前请求是一个子请求，并不使用这个当前请求的动作 $request_uri 这个变量等于包含一些客户端请求参数的原始 URI，它无法修改，请查看 $uri 更改或重写 URI $scheme 所用的协议，例如 http 或者是 https，例如 rewrite ^(.+)$ $scheme://example.com$1 redirect $server_addr 服务器地址，在完成一次系统调用后可以确定这个值，如果要绕开系统调用，则必须在listen中指定地址并且使用bind参数 $server_name 服务器名称 $server_port 请求到达服务器的端口号 $server_protocol 请求使用的协议，通常是 HTTP/1.0、HTTP/1.1或HTTP/2 $uri 请求中的当前 URI(不带请求参数，参数位于 args ) ， 不 同 于 浏 览 器 传 递 的 args)，不同于浏览器传递的 args)，不同于浏览器传递的 request_uri 的值，它可以通过内部重定向，或者使用 index 指令进行修改。不包括协议和主机名，例如 /foo/bar.html 附 nginx 模块 linknginx 模块分类 link 核心模块：nginx 最基本最核心的服务，如进程管理、权限控制、日志记录； 标准 HTTP 模块：nginx 服务器的标准 HTTP 功能； 可选 HTTP 模块：处理特殊的 HTTP 请求 邮件服务模块：邮件服务 第三方模块：作为扩展，完成特殊功能 模块清单 link核心模块：\nngx_core ngx_errlog ngx_conf ngx_events ngx_event_core ngx_epll ngx_regex 标准 HTTP 模块：\nngx_http ngx_http_core #配置端口，URI 分析，服务器相应错误处理，别名控制 (alias) 等 ngx_http_log #自定义 access 日志 ngx_http_upstream #定义一组服务器，可以接受来自 proxy, Fastcgi,Memcache 的重定向；主要用作负载均衡 ngx_http_static ngx_http_autoindex #自动生成目录列表 ngx_http_index #处理以/结尾的请求，如果没有找到 index 页，则看是否开启了random_index；如开启，则用之，否则用 autoindex ngx_http_auth_basic #基于 http 的身份认证 (auth_basic) ngx_http_access #基于 IP 地址的访问控制 (deny,allow) ngx_http_limit_conn #限制来自客户端的连接的响应和处理速率 ngx_http_limit_req #限制来自客户端的请求的响应和处理速率 ngx_http_geo ngx_http_map #创建任意的键值对变量 ngx_http_split_clients ngx_http_referer #过滤 HTTP 头中 Referer 为空的对象 ngx_http_rewrite #通过正则表达式重定向请求 ngx_http_proxy ngx_http_fastcgi #支持 fastcgi ngx_http_uwsgi ngx_http_scgi ngx_http_memcached ngx_http_empty_gif #从内存创建一个 1×1 的透明 gif 图片，可以快速调用 ngx_http_browser #解析 http 请求头部的 User-Agent 值 ngx_http_charset #指定网页编码 ngx_http_upstream_ip_hash ngx_http_upstream_least_conn ngx_http_upstream_keepalive ngx_http_write_filter ngx_http_header_filter ngx_http_chunked_filter ngx_http_range_header ngx_http_gzip_filter ngx_http_postpone_filter ngx_http_ssi_filter ngx_http_charset_filter ngx_http_userid_filter ngx_http_headers_filter #设置 http 响应头 ngx_http_copy_filter ngx_http_range_body_filter ngx_http_not_modified_filter 可选 HTTP 模块:\nngx_http_addition #在响应请求的页面开始或者结尾添加文本信息 ngx_http_degradation #在低内存的情况下允许服务器返回 444 或者 204 错误 ngx_http_perl ngx_http_flv #支持将 Flash 多媒体信息按照流文件传输，可以根据客户端指定的开始位置返回 Flash ngx_http_geoip #支持解析基于 GeoIP 数据库的客户端请求 ngx_google_perftools ngx_http_gzip #gzip 压缩请求的响应 ngx_http_gzip_static #搜索并使用预压缩的以.gz 为后缀的文件代替一般文件响应客户端请求 ngx_http_image_filter #支持改变 png，jpeg，gif 图片的尺寸和旋转方向 ngx_http_mp4 #支持.mp4,.m4v,.m4a 等多媒体信息按照流文件传输，常与 ngx_http_flv 一起使用 ngx_http_random_index #当收到 / 结尾的请求时，在指定目录下随机选择一个文件作为 index ngx_http_secure_link #支持对请求链接的有效性检查 ngx_http_ssl #支持 https ngx_http_stub_status ngx_http_sub_module #使用指定的字符串替换响应中的信息 ngx_http_dav #支持 HTTP 和 WebDAV 协议中的 PUT/DELETE/MKCOL/COPY/MOVE 方法 ngx_http_xslt #将 XML 响应信息使用 XSLT 进行转换 邮件服务模块:\nngx_mail_core ngx_mail_pop3 ngx_mail_imap ngx_mail_smtp ngx_mail_auth_http ngx_mail_proxy ngx_mail_ssl 第三方模块：\necho-nginx-module #支持在 nginx 配置文件中使用 echo/sleep/time/exec 等类 Shell 命令 memc-nginx-module rds-json-nginx-module #使 nginx 支持 json 数据的处理 lua-nginx-module "
            }
        );
    index.add(
            {
                id:  15 ,
                href: "\/docs\/demo\/features\/",
                title: "Features",
                description: "A guide to the core features of the Lotus Docs theme.",
                content: ""
            }
        );
    index.add(
            {
                id:  16 ,
                href: "\/docs\/dev\/golang\/fyne\/project\/",
                title: "项目案例",
                description: "使用Fyne实现几个项目",
                content: ""
            }
        );
    index.add(
            {
                id:  17 ,
                href: "\/docs\/demo\/features\/syntax-highlighting\/",
                title: "Syntax Highlighting",
                description: "How to highlight code in Lotus Docs using the built-in The PrismJS library (or Chroma).",
                content: "Code Highlighters linkLotus Docs supports syntax highlighting by Prism (enabled by default via param.docs.prism in hugo.toml) or Hugo’s built-in code highlighter Chroma.\nFenced code blocks (code enclosed by triple backticks above and below) that specify a code language (declared right of the opening fence), will automatically highlight the code content as HTML e.g. ```html:\n```html Buy cool new product Checkout ``` Result - Prism Highlighter:\nBuy cool new product Checkout Result - Chroma Highlighter (param.docs.prism = false):\nPrism Features linkThe Prism highlighter features the following:\nCopy Code Button linkAll code blocks feature a button which copies the code to the clipboard when clicked. Hover over any code block and the copy button (content_copy) will appear in the top right hand corner.\nCode Block id linkEvery code block on a page has a unique id attribute, an auto-generated value calculated from the sha1 hash of the block’s contents combined with it’s position on the page.\nFor example, the following snippet can be linked via the unique id 80c9335:\npackage main import \"fmt\" func main() { fmt.Println(\"go\" + \"lang\") fmt.Println(\"1+1 =\", 1+1) fmt.Println(\"7.0/3.0 =\", 7.0/3.0) fmt.Println(true \u0026\u0026 false) fmt.Println(true || false) fmt.Println(!true) } Line Anchors linkSpecific sections of code can be linked and highlighted by combining the code block id with the desired line numbers or ranges.\nThe URL format follows, /#{code block id}.{line no. range}.\nFor example, /#80c9335.3,5,7-13 will link to (and highlight) lines 3, 5 and 7-13 in the code block above:\nThemes linkYou can change the Prism theme via the prismTheme parameter under [params.docs] in your config file.\ninfo Additional PrismJS themes will be adapted and added to Lotus Docs periodically. Keep an eye on new releases to know when. hugo.toml hugo.yaml hugo.json [params.docs] prismTheme = \"lotusdocs\" # (optional) - Set theme for PrismJS. Options include: lotusdocs (default), solarized-light, twilight, lucario params: docs: prismTheme: lotusdocs # (optional) - Set theme for PrismJS. Options include: lotusdocs (default), solarized-light, twilight, lucario { \"params\": { \"docs\": { \"prismTheme\": \"lotusdocs\" } } } Choose from the following theme options:\nlotusdocs (default) solarized-light twilight lucario Supported Languages linkBoth Prism \u0026 Chroma support a vast array of languages. See the links below for a complete list of languages supported by each highlighter:\nPrism (≈ 290 languages) Chroma (≈ 200 languages) Code Fence Translations link info For more extensive code highlighting options with Prism, consider using the "
            }
        );
    index.add(
            {
                id:  18 ,
                href: "\/docs\/demo\/features\/katex\/",
                title: "KaTex",
                description: "Fast Tex math rendering for your Lotus Docs site",
                content: "$$ f\\relax{x} = \\int_{-\\infty}^\\infty \\hat f(\\xi)\\ e^{2 \\pi i \\xi x} \\ d\\xi $$\nHow to use KaTex with Lotus Docs linkKaTex support is controlled by the katex parameter in your front matter (line 10 below). Add and set it to true in your front matter to enable KaTex support for that page. This means KaTex support and resources are active only for pages that require it.\n--- weight: 530 title: \"KaTex\" description: \"Fast Tex math rendering for your Lotus Docs site\" icon: \"function\" date: \"2023-08-26T20:43:23+01:00\" lastmod: \"2023-08-26T20:43:23+01:00\" draft: true toc: true katex: true --- Writing LaTex in Markdown linkEquations can be displayed either in block level or inline.\nBlock display linkType an equation using double dollar signs as the delimiter:\n$$ \\int \\frac{1}{x} dx = \\ln \\left| x \\right| + C $$ renders as:\n$$ \\int \\frac{1}{x} dx = \\ln \\left| x \\right| + C $$\nInline display linkType an equation using single dollar signs as the delimiter:\n$ \\int \\frac{1}{x} dx = \\ln \\left| x \\right| + C $ renders as:\n$ \\int \\frac{1}{x} dx = \\ln \\left| x \\right| + C $\nSyntax Rendering Issues linkAs a consequence of Hugo rendering to HTML before KaTex renders to math1, there are some instances in which the KaTex equation syntax requires heavy escaping or alterations before rendering correctly. This can be time-consuming and frustrating (especially for inexperienced users). To avoid this, a "
            }
        );
    index.add(
            {
                id:  19 ,
                href: "\/docs\/demo\/features\/mermaid\/",
                title: "Mermaid",
                description: "How to use the Mermaid diagramming and chart tool with Lotus Docs",
                content: "What is Mermaid? linkMermaid is a JavaScript-based diagramming and charting tool that uses Markdown-inspired text definitions and a renderer to create and modify complex diagrams. The main purpose of Mermaid is to help documentation catch up with development.\nHow to use Mermaid with Lotus Docs linkMermaid is enabled whenever content containing Mermaid diagram syntax is present in a page’s content. You can insert Mermaid diagrams by using the mermaid language identifier with triple backtick codeblocks:\n```mermaid sequenceDiagram Alice-\u003e\u003eJohn: Hello John, how are you? loop Healthcheck John-\u003e\u003eJohn: Fight against hypochondria end Note right of John: Rational thoughts! John--\u003e\u003eAlice: Great! John-\u003e\u003eBob: How about you? Bob--\u003e\u003eJohn: Jolly good! ``` Renders as:\nsequenceDiagram Alice-\u003e\u003eJohn: Hello John, how are you? loop Healthcheck John-\u003e\u003eJohn: Fight against hypochondria end Note right of John: Rational thoughts! John--\u003e\u003eAlice: Great! John-\u003e\u003eBob: How about you? Bob--\u003e\u003eJohn: Jolly good! Other diagram examples linkFlowchart linkflowchart LR A[Hard] --\u003e|Text| B(Round) B --\u003e C{Decision} C --\u003e|One| D[Result 1] C --\u003e|Two| E[Result 2] Gnatt Chart linkgantt section Section Completed :done, des1, 2014-01-06,2014-01-08 Active :active, des2, 2014-01-07, 3d Parallel 1 : des3, after des1, 1d Parallel 2 : des4, after des1, 1d Parallel 3 : des5, after des3, 1d Parallel 4 : des6, after des4, 1d Class diagram linkclassDiagram Class01 \u003c|-- AveryLongClass : Cool \u003c\u003e Class01 Class09 --\u003e C2 : Where am i? Class09 --* C3 Class09 --|\u003e Class07 Class07 : equals() Class07 : Object[] elementData Class01 : size() Class01 : int chimp Class01 : int gorilla class Class10 { \u003e\u003eservice\u003e\u003e int id size() } State diagram linkstateDiagram-v2 [*] --\u003e Still Still --\u003e [*] Still --\u003e Moving Moving --\u003e Still Moving --\u003e Crash Crash --\u003e [*] Pie Chart linkpie \"Dogs\" : 386 \"Cats\" : 85.9 \"Rats\" : 15 Git Graph link gitGraph commit commit branch develop checkout develop commit commit checkout main merge develop commit commit Bar chart (using gantt chart) linkgantt title Git Issues - days since last update dateFormat X axisFormat %s section Issue19062 71 : 0, 71 section Issue19401 36 : 0, 36 section Issue193 34 : 0, 34 section Issue7441 9 : 0, 9 section Issue1300 5 : 0, 5 User Journey diagram link journey title My working day section Go to work Make tea: 5: Me Go upstairs: 3: Me Do work: 1: Me, Cat section Go home Go downstairs: 5: Me Sit down: 3: Me C4 diagram linkC4Context title System Context diagram for Internet Banking System Person(customerA, \"Banking Customer A\", \"A customer of the bank, with personal bank accounts.\") Person(customerB, \"Banking Customer B\") Person_Ext(customerC, \"Banking Customer C\") System(SystemAA, \"Internet Banking System\", \"Allows customers to view information about their bank accounts, and make payments.\") Person(customerD, \"Banking Customer D\", \"A customer of the bank, with personal bank accounts.\") Enterprise_Boundary(b1, \"BankBoundary\") { SystemDb_Ext(SystemE, \"Mainframe Banking System\", \"Stores all of the core banking information about customers, accounts, transactions, etc.\") System_Boundary(b2, \"BankBoundary2\") { System(SystemA, \"Banking System A\") System(SystemB, \"Banking System B\", \"A system of the bank, with personal bank accounts.\") } System_Ext(SystemC, \"E-mail system\", \"The internal Microsoft Exchange e-mail system.\") SystemDb(SystemD, \"Banking System D Database\", \"A system of the bank, with personal bank accounts.\") Boundary(b3, \"BankBoundary3\", \"boundary\") { SystemQueue(SystemF, \"Banking System F Queue\", \"A system of the bank, with personal bank accounts.\") SystemQueue_Ext(SystemG, \"Banking System G Queue\", \"A system of the bank, with personal bank accounts.\") } } BiRel(customerA, SystemAA, \"Uses\") BiRel(SystemAA, SystemE, \"Uses\") Rel(SystemAA, SystemC, \"Sends e-mails\", \"SMTP\") Rel(SystemC, customerA, \"Sends e-mails to\") "
            }
        );
    index.add(
            {
                id:  20 ,
                href: "\/docs\/demo\/shortcodes\/",
                title: "Shortcodes",
                description: "Lotus Docs Custom Shortcodes.",
                content: ""
            }
        );
    index.add(
            {
                id:  21 ,
                href: "\/docs\/demo\/shortcodes\/alerts\/",
                title: "Alerts",
                description: "How to use Alert Shortcodes to render custom page alerts in markdown.",
                content: "Adding a Page Alert linkPage alerts can be added to your markdown using the following shortcode:\n{{\u003c alert text=\"This is the default alert. It consists of a default theme colour and icon.\" /\u003e}} The above code results in the following alert:\nnotifications This is the default alert. It consists of a default theme colour and icon. Alert with Context linkAdd context to an alert via the context parameter:\n{{\u003c alert context=\"info\" text=\"This is an alert with an info context. It consists of the info theme colour and icon.\" /\u003e}} Here’s what is rendered:\ninfo This is an alert with an info context. It consists of the info theme colour and icon. Additional alert contexts include success, danger, warning, primary, light and dark:\ncheck_circle This is an alert with a success context. It consists of the success theme colour and icon. report This is an alert with a danger context. It consists of the danger theme colour and icon. warning This is an alert with a warning context. It consists of the warning theme colour and icon. info This is an alert with a primary context. Its theme and icon colors match those of the current primary theme colour. This is an alert with a light context. It consists of the light theme colour. The light alert has no default icon. This is an alert with a dark context. It consists of the dark theme colour. The dark alert has no default icon. Alert with Custom Emoji Icon linkThe default icon for an alert context can be substituted with an emoji using the icon parameter:\n{{\u003c alert icon=\"🍅\" context=\"info\" text=\"This is an info context alert with a tomato emoji replacing the default icon. The info theme colour remains unchanged.\" /\u003e}} 🍅 This is an info context alert with a tomato emoji replacing the default icon. The info theme colour remains unchanged. Alert with No Icon linkSetting the icon parameter to an empty space, icon=\" \", will render an alert with no icon:\n{{\u003c alert icon=\" \" context=\"info\" text=\"This info context alert has no icon.\" /\u003e}} This info context alert has no icon. warning N.B. The icon parameter must contain a space. Setting it to icon=\"\" will render the default icon.\nRender Markdown \u0026 HTML inside an Alert link warning So % delimited alerts render correctly, ensure you have unsafe = true set under [markup.goldmark.renderer] in your hugo.toml configuration file1.\nUse a paired shortcode with the % delimiter2 to render Markdown and HTML inside an alert:\n{{% alert icon=\"🛒\" context=\"success\" %}} This ***paired shortcode*** alert contains a **markdown** list and header: #### My Shopping List: 1. Tomatoes 2. Bananas 3. Pineapples and a sentence styled using HTML tags such as \\ and \\ {{% /alert %}} 🛒\nThis paired shortcode alert contains a markdown list and header:\nMy Shopping List: link Tomatoes Bananas Pineapples and a sentence styled using HTML tags such as and Markdown alerts do not seem to display background color ↩︎\nShortcodes with Markdown - gohugo.io ↩︎\n"
            }
        );
    index.add(
            {
                id:  22 ,
                href: "\/docs\/demo\/shortcodes\/tables\/",
                title: "Tables",
                description: "How to use the Lotus Docs table shortcode to render great looking markdown tables",
                content: "The table shortcode enables Lotus Docs to take advantage of Bootstrap’s opt-in table styling.\nRegular Tables linkBy default Lotus Docs renders regular Markdown tables with some very basic styling:\n| Tables | Are | Cool | |----------|:-------------:|------:| | col 1 is | left-aligned | $1600 | | col 2 is | centered | $12 | | col 3 is | right-aligned | $1 | Result:\nTables Are Cool col 1 is left-aligned $1600 col 2 is centered $12 col 3 is right-aligned $1 Shortcode Tables linkThe the table shortcode allows you to implement a number of Bootstrap’s table styling classes. The table shortcode without any options will render a basic bordered table with a borderless floating table head:\n{{\u003c table \u003e}} | Animal | Sounds | Legs | |---------|--------|-----| | `Cat` | Meow | 4 | | `Dog` | Woof | 4 | | `Cricket` | Chirp | 6 | {{\u003c /table \u003e}} Animal Sounds Legs Cat Meow 4 Dog Woof 4 Cricket Chirp 6 warning Since the table shortcode works by implementing Bootstrap’s opt-in table styling, not all Bootstrap’s table styles are compatible with Lotus Docs. All compatible options are documented on this page.\nStriped Rows linkUse the table-striped option to add zebra-striping to the table rows.\n{{\u003c table \"table-striped\" \u003e}} ... .. {{\u003c /table \u003e}} Parameter Default Value Description google_fonts N/A An array of Google fonts and sizes to load. e.g.\ngoogle_fonts = [[\"Poppins\", \"300, 400, 600, 700\"],[\"Source Code Pro\", \"500, 700\"]]\nThis will load the Google Poppins and Source Code Pro fonts in the specified sizes. sans_serif_font System Font Set the Sans Serif font. e.g. \"Poppins\" secondary_font System Font Set the Secondary font. e.g. \"Poppins\" Striped Columns linkUse the table-striped-columns option to add zebra-striping to the table columns.\n{{\u003c table \"table-striped-columns\" \u003e}} ... .. {{\u003c /table \u003e}} Parameter Default Value Description google_fonts N/A An array of Google fonts and sizes to load. e.g.\ngoogle_fonts = [[\"Poppins\", \"300, 400, 600, 700\"],[\"Source Code Pro\", \"500, 700\"]]\nThis will load the Google Poppins and Source Code Pro fonts in the specified sizes. sans_serif_font System Font Set the Sans Serif font. e.g. \"Poppins\" secondary_font System Font Set the Secondary font. e.g. \"Poppins\" Hoverable Rows linkUse the table-hover option to enable a hover state on the table rows.\n{{\u003c table \"table-hover\" \u003e}} ... .. {{\u003c /table \u003e}} Parameter Default Value Description google_fonts N/A An array of Google fonts and sizes to load. e.g.\ngoogle_fonts = [[\"Poppins\", \"300, 400, 600, 700\"],[\"Source Code Pro\", \"500, 700\"]]\nThis will load the Google Poppins and Source Code Pro fonts in the specified sizes. sans_serif_font System Font Set the Sans Serif font. e.g. \"Poppins\" secondary_font System Font Set the Secondary font. e.g. \"Poppins\" Tables without borders linkUse the table-borderless option a table without borders.\n{{\u003c table \"table-borderless\" \u003e}} ... .. {{\u003c /table \u003e}} Parameter Default Value Description google_fonts N/A An array of Google fonts and sizes to load. e.g.\ngoogle_fonts = [[\"Poppins\", \"300, 400, 600, 700\"],[\"Source Code Pro\", \"500, 700\"]]\nThis will load the Google Poppins and Source Code Pro fonts in the specified sizes. sans_serif_font System Font Set the Sans Serif font. e.g. \"Poppins\" secondary_font System Font Set the Secondary font. e.g. \"Poppins\" Small Tables linkAdd table-sm or table-xs to make any table more compact by reducing the cell padding.\nParameter Default Value Description google_fonts N/A An array of Google fonts and sizes to load. e.g.\ngoogle_fonts = [[\"Poppins\", \"300, 400, 600, 700\"],[\"Source Code Pro\", \"500, 700\"]]\nThis will load the Google Poppins and Source Code Pro fonts in the specified sizes. sans_serif_font System Font Set the Sans Serif font. e.g. \"Poppins\" secondary_font System Font Set the Secondary font. e.g. \"Poppins\" Parameter Default Value Description google_fonts N/A An array of Google fonts and sizes to load. e.g.\ngoogle_fonts = [[\"Poppins\", \"300, 400, 600, 700\"],[\"Source Code Pro\", \"500, 700\"]]\nThis will load the Google Poppins and Source Code Pro fonts in the specified sizes. sans_serif_font System Font Set the Sans Serif font. e.g. \"Poppins\" secondary_font System Font Set the Secondary font. e.g. \"Poppins\" Responsive Tables linkAdd the table-responsive option to make a table responsive:\nAnimal Sounds Legs Cat Meow 4 Dog Woof 4 Cricket Chirp 6 Combining Table Options linkCombine table shortcode options to create your desired effect:\n{{\u003c table \"table-striped table-sm table-borderless\" \u003e}} ... .. {{\u003c /table \u003e}} Parameter Default Value Description google_fonts N/A An array of Google fonts and sizes to load. e.g.\ngoogle_fonts = [[\"Poppins\", \"300, 400, 600, 700\"],[\"Source Code Pro\", \"500, 700\"]]\nThis will load the Google Poppins and Source Code Pro fonts in the specified sizes. sans_serif_font System Font Set the Sans Serif font. e.g. \"Poppins\" secondary_font System Font Set the Secondary font. e.g. \"Poppins\" "
            }
        );
    index.add(
            {
                id:  23 ,
                href: "\/docs\/demo\/shortcodes\/tabs\/",
                title: "Tabs",
                description: "How to use the Lotus Docs tabs shortcode to render Bootstrap Tabs",
                content: "The tabs shortcode leverages Bootstrap’s Tabs styling to easily add Tabs to your markdown content. The shortcode is actually a combination of two separate shortcodes (tab and tabs) working together.\nYou need a minimum of one tab shortcode nested inside a tabs shortcode for the component to function:\n{{\u003c tabs tabTotal=\"1\"\u003e}} {{% tab tabName=\"Tab 1\" %}} **Tab 1 Content** {{% /tab %}} {{\u003c /tabs \u003e}} Basic Tabs linkThe following example demonstrates how to create a basic multi tab navigation component using the tabs and tab shortcodes.\n{{\u003c tabs tabTotal=\"3\"\u003e}} {{% tab tabName=\"Windows\" %}} **Windows Content** Example content specific to **Windows** operating systems {{% /tab %}} {{% tab tabName=\"MacOS\" %}} **MacOS Content** Example content specific to **Mac** operating systems {{% /tab %}} {{% tab tabName=\"Linux\" %}} **Linux Content** Example content specific to **Linux** operating systems {{% /tab %}} {{\u003c /tabs \u003e}} Renders:\nWindows MacOS Linux Windows Content\nExample content specific to Windows operating systems\nMacOS Content\nExample content specific to Mac operating systems\nLinux Content\nExample content specific to Linux operating systems\nRight Aligned Tabs link {{\u003c tabs tabTotal=\"3\" tabRightAlign=\"2\"\u003e}} {{% tab tabName=\"Tab 1\" %}} **Tab 1 Content** {{% /tab %}} {{% tab tabName=\"Tab 2\" %}} **Tab 2 Content** {{% /tab %}} {{% tab tabName=\"Tab 3\" %}} **Tab 3 Content** {{% /tab %}} {{\u003c /tabs \u003e}} Renders:\nTab 1 Tab 2 Tab 3 Tab 1 Content\nTab 2 Content\nTab 3 Content\nHow does it work? linktabs.html linkThis is the parent shortcode that wraps around all nested tab shortcodes in the tab group and generates the tab navigation.\nVariable Description tabTotal This variable is used to generate the tab navigation. Simply set it to the amount of tab shortcodes you have. In the above example, since there are three nested tab shortcodes, you would set tabTotal to 3. tabRightAlign This is an optional variable that if used will right align the tab number you inputted and all tabs after it. In the above example, since tabRightAlign is set to two, tabs 2 and 3 will be right aligned. tab.html linkThis is a child shortcode that is nested inside tabs shortcodes. Each tab shortcode equals one tab so add as many as you need. Please note, make sure tabTotal in the tabs shortcode is equal to the amount of tab shortcodes you define.\nVariable Description tabName This variable defines the title of the tab. Credit linkBoth tab and tabs shortcodes documented above are a modified versions of the open source Hugo Dynamic Tabs shortcodes. Thank you rvanhorn 👍.\n"
            }
        );
    index.add(
            {
                id:  24 ,
                href: "\/docs\/demo\/shortcodes\/prism\/",
                title: "Prism",
                description: "How to use the Prism Shortcode for syntax highlighting code blocks.",
                content: "Prism Shortcode linkWhen Prism is enabled in hugo.toml syntax highlighting can also be achieved using a paired Prism shortcode. The code language is declared using the lang parameter:\n{{\u003c prism lang=\"html\" \u003e}} Buy cool new product Checkout {{\u003c /prism \u003e}} All code blocks highlighted by Prism feature the Copy to Clipboard Button plugin. Hover over (or tap if on mobile) the examples above and the copy button appears in the top right hand corner of the code block. Click this button to copy the code to your clipboard.\nLine Highlighting linkThe Prism shortcode can highlight specific lines and/or line ranges in code blocks using the line parameter:\n{{\u003c prism lang=\"html\" line=\"2-4,6\" \u003e}} ... {{\u003c /prism \u003e}} See the rendered example below:\nBuy cool new product Checkout Line Numbers linkAdd line numbers to your code with the line-numbers=\"true\" parameter:\nBuy cool new product Checkout The number at which the line starts can be specified by the start parameter. e.g. start=\"48\":\nBuy cool new product Checkout Line Number Anchors linkSpecific lines in highlighted code blocks can be linked when both the line-numbers and linkable-line-numbers options are true:\n{{\u003c prism lang=\"html\" linkable-line-numbers=\"true\" line-numbers=\"true\" \u003e}} ... {{\u003c /prism \u003e}} Rendered code block:\nBuy cool new product Checkout Clicking on any of the line numbers above will update the hash of the current page to link to that specific line.\ninfo All elements of Prism code blocks have an auto-generated id attribute. This id is a combination of the unique hash of the code block content plus it’s unique position on the page. The generated hash can be overridden using a Custom id set via the id option.\nThe url format follows #{hash-id}.{lines}, where {hash-id} is the auto-generated hash value of the code block and {lines} is one or more lines or line ranges that follows the line highlighting format.\nFor example, line 8 in the code block below can be linked using the following anchor #adea9eb.8:\nBuy cool new product Checkout Combined Line Parameters linkPrism’s Line Highlighting \u0026 Line Numbers plugins are compatible with each other. So the line \u0026 line-numbers options can be combined to display both, line numbers and highlight specified lines in a code block:\n{{\u003c prism lang=\"html\" line-numbers=\"true\" line=\"2-4,6\" \u003e}} ... {{\u003c /prism \u003e}} This renders the following code block:\nBuy cool new product Checkout Combining line \u0026 start options requires the use of the line-offset option:\n{{\u003c prism lang=\"html\" line-numbers=\"true\" start=\"48\" line=\"49-51,54\" line-offset=\"48\" \u003e}} ... {{\u003c /prism \u003e}} This renders the following code block:\nBuy cool new product Checkout File Highlight linkExternal files can be fetched and highlighted using the File Highlight option. Use the src parameter to retrieve an external file, like so:\n{{\u003c prism src=\"https://raw.githubusercontent.com/colinwilson/lotusdocs/release/SECURITY.md\" /\u003e}} Result:\nUse the src-range parameter to retrieve a specific line range from an external file. src-range=\"32,46\" will fetch lines 32 to 46 of the file specified by the src parameter:\n{{\u003c prism src-range=\"32,46\" src=\"https://raw.githubusercontent.com/colinwilson/lotusdocs/release/data/landing.yaml\" line-numbers=\"true\" /\u003e}} src-range can be used with the line-numbers option to number the retrieved range. So the above shortcode produces the following code block:\ninfo See Prism’s docs for more info on the File Highlight plugin.\nDisable Prism linkPrism syntax highlighting can be disabled by setting [params.docs.prism] to false in the hugo.toml configuration file.\nCommand Line linkTBC\n"
            }
        );
    index.add(
            {
                id:  25 ,
                href: "\/docs\/demo\/shortcodes\/markdownify\/",
                title: "Markdownify",
                description: "A simple shortcode to render content as Markdown.",
                content: "This shortcode parses its content as markdown.\nUsage linkThe following:\n{{\u003c markdownify \u003e}} **Bold Text**: Above a code block. ```html Hello World {{\u003c /markdownify \u003e}} Renders:\nBold Text: Above a code block.\nHello World Nested Shortcodes linkThe markdownify shortcode is especially useful in cases where you require portions of content nested inside another shortcode be parsed as Markdown.\nFor example, here’s a paragraph of markdown text and a prism shortcode codeblock nested within a tabs shortcode:\n{{\u003c tabs tabTotal=\"1\" \u003e}} {{\u003c tab tabName=\"Tab 1\" \u003e}} {{\u003c markdownify \u003e}} ### Markdownified Text Some `markdownified` text inside a `tabs` shortcode {{\u003c /markdownify \u003e}} {{\u003c prism lang=\"html\" line=\"3,6\" \u003e}} A code block using the Prism Shortcode This shortcode is nested inside a Tabs shortcode {{\u003c /prism \u003e}} {{\u003c /tab \u003e}} {{\u003c /tabs \u003e}} Renders:\nTab 1 Markdownified Text\nSome markdownified text inside a tabs shortcode\nA code block using the Prism Shortcode This shortcode is nested inside a Tabs shortcode "
            }
        );
    index.add(
            {
                id:  26 ,
                href: "\/docs\/demo\/shortcodes\/katex\/",
                title: "KaTex",
                description: "A Shortcode to render KaTex syntax in your Lotus Docs site",
                content: "Lotus Docs has "
            }
        );
    index.add(
            {
                id:  27 ,
                href: "\/docs\/",
                title: "Docs",
                description: "",
                content: ""
            }
        );
    search.addEventListener('input', show_results, true);

    function show_results(){
        const maxResult =  5 ;
        const minlength =  0 ;
        var searchQuery = sanitizeHTML(this.value);
        var results = index.search(searchQuery, {limit: maxResult, enrich: true});

        
        const flatResults = new Map(); 
        for (const result of results.flatMap(r => r.result)) {
        if (flatResults.has(result.doc.href)) continue;
        flatResults.set(result.doc.href, result.doc);
        }

        suggestions.innerHTML = "";
        suggestions.classList.remove('d-none');

        
        if (searchQuery.length < minlength) {
            const minCharMessage = document.createElement('div')
            minCharMessage.innerHTML = `Please type at least <strong>${minlength}</strong> characters`
            minCharMessage.classList.add("suggestion__no-results");
            suggestions.appendChild(minCharMessage);
            return;
        } else {
            
            if (flatResults.size === 0 && searchQuery) {
                const noResultsMessage = document.createElement('div')
                noResultsMessage.innerHTML = "No results for" + ` "<strong>${searchQuery}</strong>"`
                noResultsMessage.classList.add("suggestion__no-results");
                suggestions.appendChild(noResultsMessage);
                return;
            }
        }

        
        for(const [href, doc] of flatResults) {
            const entry = document.createElement('div');
            suggestions.appendChild(entry);

            const a = document.createElement('a');
            a.href = href;
            entry.appendChild(a);

            const title = document.createElement('span');
            title.textContent = doc.title;
            title.classList.add("suggestion__title");
            a.appendChild(title);

            const description = document.createElement('span');
            description.textContent = doc.description;
            description.classList.add("suggestion__description");
            a.appendChild(description);

            suggestions.appendChild(entry);

            if(suggestions.childElementCount == maxResult) break;
        }
    }
    }());
</script>
        
    </body>
</html>